import{_ as t,n as e,g as a,J as s,o as l,e as i,w as n,i as _,f as o,j as d,k as c,r as u,F as p,l as f,v as h,t as r,m as k,q as m,y as x,O as y,P as g}from"./index-23f4cc32.js";import{_ as w,a as b}from"./nan.89d00671.js";import{_ as C,a as v}from"./nan_b.1f2ad1df.js";const F=t({data:()=>({pop_notice:!1,notice_type:1,notice_content:"您当前可打招呼次数已达到每日限制，联更多的TA可开通会员，请联系客服",paddingB:0,total:0,params:{page:1,limit:10,is_mine:0},list:[],iflike:!1,had_likes:[],show_talk:!1,talk_data:{},fromUserid:"",send_content:""}),methods:{bet_talk(t){this.show_talk=!0,this.talk_data=t},pop_ok(){e({url:"/pages/movie/kefu/kefu"})},getList(){this.$api.third_openApi.like_me_index(this.params).then((t=>{0==t.code&&(this.list=t.data.data,this.total=t.count,this.list.forEach((t=>{this.$set(t,"iflike",!1),this.$set(t,"isfar",(1.5*Math.random()+1).toFixed(2)),this.$set(t,"ifonline",Math.random()>=.5),this.$set(t,"istime",(.5*Math.random()+1).toFixed(2)),this.had_likes.forEach((e=>{t.account==e&&(t.iflike=!0)}))})))}))},setLike(t,e,s){var l={type:t,user_id:a("userInfo").user_id,user_account:e};1==t&&this.$api.third_openApi.near_user_like(l).then((t=>{0==t.code&&(this.list[s].iflike=!0)}))},sendMessage(t){let e={id:this.$util.getUuid(),is_group:0,fromUser:this.fromUser,type:"text",toContactId:t,content:this.send_content,sendTime:(new Date).getTime()};this.$api.msgApi.sendMessage(e).then((t=>{0==t.code?(this.show_talk=!1,this.notice_content="已打招呼，等待TA的回应！可在下方栏目-消息中查看",this.pop_notice=!0,this.notice_type=2):s({title:t.msg,icon:"none"})})).catch((t=>{}))}},created(){this.paddingB=this.inlineTools,this.getList();var t=a("userInfo");this.had_likes=t.islikes.split(","),this.fromUser=t}},[["render",function(t,e,a,s,F,$){const T=m("cu-custom"),A=x,M=_,U=m("Empty"),j=y,I=g;return l(),i(M,null,{default:n((()=>[o(T,{bgColor:"bg-gradual-pink",isBack:!0},{backText:n((()=>[])),content:n((()=>[d("喜欢我的TA")])),_:1}),0!==F.list.length?(l(),i(M,{key:0},{default:n((()=>[(l(!0),c(p,null,u(F.list,((t,e)=>f((l(),i(M,{class:"user_line",key:e},{default:n((()=>[o(M,{class:"user_l"},{default:n((()=>[o(A,{src:"http://123.56.77.160/"+t.avatar,style:{width:"80px",height:"80px","border-radius":"50%"}},null,8,["src"]),o(M,{class:"item_like"},{default:n((()=>[t.ifonline?(l(),i(M,{key:0,class:"cuIcon-title",onClick:a=>$.setLike(2,t.account,e)},null,8,["onClick"])):k("",!0)])),_:2},1024)])),_:2},1024),o(M,{class:"user_r"},{default:n((()=>[o(M,{class:"item_name"},{default:n((()=>[o(M,{style:{display:"flex"}},{default:n((()=>[0==t.sex?(l(),i(M,{key:0,class:"sex_ico"},{default:n((()=>[o(A,{src:w,style:{width:"100%"},mode:"widthFix"})])),_:1})):k("",!0),1==t.sex?(l(),i(M,{key:1,class:"sex_ico"},{default:n((()=>[o(A,{src:b,style:{width:"100%"},mode:"widthFix"})])),_:1})):k("",!0),d(" "+r(t.realname),1)])),_:2},1024),o(M,{class:"col_96",style:{display:"flex",width:"150px","justify-content":"flex-end"}},{default:n((()=>[o(M,null,{default:n((()=>[d(r(t.isfar)+"km · ",1)])),_:2},1024),t.ifonline?(l(),i(M,{key:0},{default:n((()=>[d("在线")])),_:1})):k("",!0),t.ifonline?k("",!0):(l(),i(M,{key:1},{default:n((()=>[d(r(t.istime)+"小时",1)])),_:2},1024))])),_:2},1024)])),_:2},1024),o(M,{style:{margin:"5px 0","text-align":"right"}},{default:n((()=>[o(M,{class:"item_btn",onClick:e=>$.bet_talk(t)},{default:n((()=>[d("打招呼")])),_:2},1032,["onClick"])])),_:2},1024),null!==t.motto?(l(),i(M,{key:0,class:"motto"},{default:n((()=>[d("签名："+r(t.motto),1)])),_:2},1024)):k("",!0)])),_:2},1024)])),_:2},1024)),[[h,e<4]]))),128))])),_:1})):(l(),i(U,{key:1,noDatatext:"暂无记录",textcolor:"#999"})),f(o(M,null,{default:n((()=>[o(M,{class:"com_bg",onClick:e[0]||(e[0]=t=>F.show_talk=!1)}),o(M,{class:"talk_mian"},{default:n((()=>[o(M,{style:{width:"90%",margin:"auto"}},{default:n((()=>[o(M,{class:"talk_ico"},{default:n((()=>[o(A,{src:"http://123.56.77.160/"+F.talk_data.avatar,style:{width:"100%","border-radius":"50%",height:"80px"},mode:"widthFix"},null,8,["src"])])),_:1}),o(M,{class:"talk_name"},{default:n((()=>[d(r(F.talk_data.realname),1)])),_:1}),o(M,{class:"talk_desc"},{default:n((()=>[0==F.talk_data.sex?(l(),i(M,{key:0,class:"talk_sex p_type1"},{default:n((()=>[o(M,{class:"sex_ico"},{default:n((()=>[o(A,{src:C,style:{width:"100%"},mode:"widthFix"})])),_:1}),o(M,{style:{"line-height":"25px"}},{default:n((()=>[d(r(F.talk_data.ages),1)])),_:1})])),_:1})):k("",!0),1==F.talk_data.sex?(l(),i(M,{key:1,class:"talk_sex p_type1"},{default:n((()=>[o(M,{class:"sex_ico"},{default:n((()=>[o(A,{src:v,style:{width:"100%"},mode:"widthFix"})])),_:1}),o(M,{style:{"line-height":"25px"}},{default:n((()=>[d(r(F.talk_data.ages),1)])),_:1})])),_:1})):k("",!0),2==F.talk_data.sex?(l(),i(M,{key:2,class:"talk_sex p_type3"},{default:n((()=>[o(M,{style:{"line-height":"25px"}},{default:n((()=>[d(r(F.talk_data.ages),1)])),_:1})])),_:1})):k("",!0),o(M,{class:"talk_sex p_type3"},{default:n((()=>[o(M,{style:{"line-height":"25px"}},{default:n((()=>[d("vip-"+r(F.talk_data.islevel),1)])),_:1})])),_:1})])),_:1}),o(M,{class:"talk_form"},{default:n((()=>[o(M,{style:{"padding-left":"10px"}},{default:n((()=>[o(j,{placeholder:"随意打个招呼吧",style:{height:"32px","font-size":"14px"},maxlength:"32",name:"input",modelValue:F.send_content,"onUpdate:modelValue":e[1]||(e[1]=t=>F.send_content=t)},null,8,["modelValue"])])),_:1}),o(M,null,{default:n((()=>[o(I,{class:"cu-btn bg-blue shadow",onClick:e[2]||(e[2]=t=>$.sendMessage(F.talk_data.user_id))},{default:n((()=>[d("发送")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},512),[[h,F.show_talk]]),f(o(M,null,{default:n((()=>[o(M,{class:"com_bg"}),o(M,{class:"com_main"},{default:n((()=>[o(M,{class:"pop_mian"},{default:n((()=>[o(M,{class:"pop_title"},{default:n((()=>[d("提示")])),_:1}),o(M,{style:{padding:"10px 15px","line-height":"25px","flex-wrap":"wrap","text-align":"center"}},{default:n((()=>[d(r(F.notice_content),1)])),_:1}),o(M,{class:"pop_foot"},{default:n((()=>[1==F.notice_type?(l(),i(M,{key:0,class:"pop_ft_btn1",onClick:e[3]||(e[3]=t=>F.pop_notice=!1)},{default:n((()=>[d("关闭")])),_:1})):k("",!0),1==F.notice_type?(l(),i(M,{key:1,class:"pop_ft_btn2",onClick:e[4]||(e[4]=t=>$.pop_ok())},{default:n((()=>[d("去升级")])),_:1})):k("",!0),2==F.notice_type?(l(),i(M,{key:2,class:"pop_ft_btn2",onClick:e[5]||(e[5]=t=>F.pop_notice=!1)},{default:n((()=>[d("确定")])),_:1})):k("",!0)])),_:1})])),_:1})])),_:1})])),_:1},512),[[h,F.pop_notice]])])),_:1})}],["__scopeId","data-v-82977595"]]);export{F as default};
