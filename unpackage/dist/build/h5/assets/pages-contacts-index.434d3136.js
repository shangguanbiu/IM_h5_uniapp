import{_ as t,o as e,e as a,w as s,f as n,k as l,r as i,F as c,i as o,S as r,q as u,j as d,t as m,a1 as h,m as p,y as f,u as g,s as _,a as y,b,g as x,n as C,d as v,C as k,O as T,l as w,v as I,x as S,P as B,a2 as L,z as $}from"./index-d8cdb88b.js";import{s as D}from"./status.4b591e55.js";const j=t({name:"breadcrum",props:{tree:{type:Array,default:()=>({})},icon:{type:String,default:()=>"cuIcon-right"}},data:()=>({}),methods:{open(t){this.$emit("openBread",t)}}},[["render",function(t,g,_,y,b,x){const C=o,v=f,k=r;return e(),a(C,null,{default:s((()=>[n(k,{class:"folder-wap","scroll-x":!0,"scroll-left":99999999},{default:s((()=>[n(C,{class:"im-flex im-justify-content-start im-align-items-center"},{default:s((()=>[(e(!0),l(c,null,i(_.tree,((l,i)=>(e(),a(C,{class:"tab-item im-flex im-justify-content-start im-align-items-center",onClick:t=>x.open(l),key:i},{default:s((()=>[n(C,{class:u(["mar10 lz-tree-name font-color-999",{"font-color-333":i==_.tree.length-1}])},{default:s((()=>[d(m(l.name),1)])),_:2},1032,["class"]),h(t.$slots,"icon",{},(()=>[i<_.tree.length-1?(e(),a(v,{key:0,class:u(["font-color-999",[_.icon?_.icon:"cuIcon-right"]])},null,8,["class"])):p("",!0)]),!0)])),_:2},1032,["onClick"])))),128))])),_:3})])),_:3})])),_:3})}],["__scopeId","data-v-b66ec5ca"]]),P=g(_),M=y(_),{unread:z,contacts:N,sysUnread:O}=b(P);const V=t({components:{breadcurm:j,statusPoint:D},name:"contacts",props:{},data:()=>({PageCur:"contacts",navList:[],TabCur:0,tabbarH:50,hidden:!0,listCurID:"",list:[],listCur:"",total:0,scrollLeft:0,msgs:N,unread:O,globalConfig:M.globalConfig,appSetting:M.appSetting,tree:[{id:1,name:"技术部"},{id:2,name:"产品部"},{id:3,name:"信息部"}],depList:[{id:1,name:"技术部"},{id:2,name:"财务部"}],userList:[{id:1,realname:"张三",avatar:"https://api.multiavatar.com/raingad1.png?apikey=zdvXV3W4MjwhP9"},{id:2,realname:"李四",avatar:"https://api.multiavatar.com/raingad2.png?apikey=zdvXV3W4MjwhP9"}],tabList:["普通通讯录","企业通讯录"],contacts:[],userinfo:{}}),watch:{msgs(t){this.initContacts(t)}},created(){this.listCur=this.contacts[0]},mounted(){this.initContacts(this.msgs),this.userinfo=x("userInfo")},onShow(){this.navList=[{name:"home",title:this.$t("nav.home"),notice:0},{name:"message",title:this.$t("nav.message"),notice:z},{name:"serve",title:this.$t("nav.serve"),notice:0},{name:"contacts",title:this.$t("nav.contacts"),notice:O},{name:"mine",title:this.$t("nav.mine"),notice:0}]},methods:{NavChange:function(t){"mine"==t.name?C({url:"/pages/mine/index"}):"message"==t.name?C({url:"/pages/index/mv_index"}):"compass"==t.name?C({url:"/pages/compass/index"}):"home"==t.name?v({url:"/pages/index/index"}):"serve"==t.name&&C({url:"/pages/movie/kefu/kefu"})},initContacts(t){const e=JSON.parse(JSON.stringify(t)).filter((t=>0==t.is_group));this.total=e.length;const a=e.sort(((t,e)=>"#"===t.index?1:"#"===e.index?-1:t.index.localeCompare(e.index,"zh"))).reduce(((t,e)=>{const a=e.index,s=t.findIndex((t=>t.name===a));return-1===s?t.push({name:a,children:[e]}):t[s].children.push(e),t}),[]);this.contacts=a},openDep(t){},openDetails(t){C({url:"/pages/contacts/detail?id="+t.id})},openGroup(){C({url:"/pages/contacts/group"})},openFriend(){C({url:"/pages/contacts/friend"})},tabSelect(t){this.TabCur=t.currentTarget.dataset.id,this.scrollLeft=60*(t.currentTarget.dataset.id-1)},getCur(t){this.hidden=!1,this.listCur=this.contacts[t.target.id].name},setCur(t){this.hidden=!0,this.listCur=this.listCur},tMove(t){let e=t.touches[0].clientY,a=this.boxTop,s=this;if(e>a){let t=parseInt((e-a)/20);this.listCur=s.contacts[t].name}},tStart(){this.hidden=!1},tEnd(){this.hidden=!0,this.listCurID=this.listCur},indexSelect(t){let e=this,a=this.barHeight,s=this.contacts,n=Math.ceil(s.length*t.detail.y/a);for(let l=0;l<s.length;l++)if(n<l+1)return e.listCur=s[l].name,e.movableY=20*l,!1}}},[["render",function(t,h,g,_,y,b){const x=o,C=f,v=S("statusPoint"),D=S("Empty"),j=r,P=B,M=S("breadcurm"),z=L,N=$;return e(),a(x,null,{default:s((()=>[0==y.TabCur?(e(),a(j,{key:0,"scroll-y":"",class:"indexes","scroll-into-view":"indexes-"+y.listCurID,style:k([{height:"calc(100vh - "+(t.CustomBar+t.inlineTools+t.StatusBar)+"px)"}]),"scroll-with-animation":!0,"enable-back-to-top":!0},{default:s((()=>[n(x,{style:{"padding-bottom":"30rpx"}},{default:s((()=>[n(x,{class:"cu-list menu"},{default:s((()=>[n(x,{class:"cu-item arrow",onClick:b.openFriend},{default:s((()=>[n(x,{class:u(["cu-avatar mr-15 invite-bg",y.appSetting.circleAvatar?"round":"radius"])},null,8,["class"]),n(x,{class:"content"},{default:s((()=>[n(C,{class:"c-333"},{default:s((()=>[d(m(t.$t("contact.invite")),1)])),_:1})])),_:1}),n(x,{class:"action"},{default:s((()=>[y.unread>0?(e(),a(x,{key:0,class:"cu-tag round bg-red sm"},{default:s((()=>[d(m(y.unread),1)])),_:1})):p("",!0)])),_:1})])),_:1},8,["onClick"]),n(x,{class:"cu-item arrow",onClick:b.openGroup},{default:s((()=>[n(x,{class:u(["cu-avatar mr-15 group-bg",y.appSetting.circleAvatar?"round":"radius"])},null,8,["class"]),n(x,{class:"content"},{default:s((()=>[n(C,{class:"c-333"},{default:s((()=>[d(m(t.$t("contact.group_tit")),1)])),_:1})])),_:1})])),_:1},8,["onClick"])])),_:1}),(e(!0),l(c,null,i(y.contacts,((t,o)=>(e(),a(x,{key:o,class:u("indexItem-"+t.name),id:"indexes-"+t.name,"data-index":t.name},{default:s((()=>[n(x,{class:"padding"},{default:s((()=>[d(m(t.name),1)])),_:2},1024),n(x,{class:"cu-list menu no-padding"},{default:s((()=>[(e(!0),l(c,null,i(t.children,((t,l)=>(e(),a(x,{class:"cu-item",key:l,onClick:e=>b.openDetails(t)},{default:s((()=>[n(x,{class:u(["cu-avatar mr-15",y.appSetting.circleAvatar?"round":"radius"]),style:k([{backgroundImage:"url("+t.avatar+")"}])},null,8,["class","style"]),n(x,{class:"content"},{default:s((()=>[n(x,{class:"c-333"},{default:s((()=>[t.is_online&&0==t.is_group&&1==y.globalConfig.chatInfo.online?(e(),a(v,{key:0,type:"success"})):p("",!0),d(" "+m(t.displayName),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:2},1024)])),_:2},1032,["class","id","data-index"])))),128)),n(x,{class:"text-center m-20 text-grey"},{default:s((()=>[d(m(y.total)+" "+m(t.$t("contact.total")),1)])),_:1}),y.contacts.length?p("",!0):(e(),a(D,{key:0,noDatatext:t.$t("contact.no_user"),textcolor:"#999"},null,8,["noDatatext"]))])),_:1})])),_:1},8,["scroll-into-view","style"])):p("",!0),0==y.TabCur?(e(),a(x,{key:1,class:"indexBar",style:k([{height:"calc(100vh - "+t.CustomBar+"px - 50px)"}])},{default:s((()=>[n(x,{class:"indexBar-box",onTouchstart:b.tStart,onTouchend:b.tEnd,onTouchmove:T(b.tMove,["stop"])},{default:s((()=>[(e(!0),l(c,null,i(y.contacts,((t,n)=>(e(),a(x,{class:"indexBar-item",key:n,id:n,onTouchstart:b.getCur,onTouchend:b.setCur},{default:s((()=>[d(m(t.name),1)])),_:2},1032,["id","onTouchstart","onTouchend"])))),128))])),_:1},8,["onTouchstart","onTouchend","onTouchmove"])])),_:1},8,["style"])):p("",!0),1==y.TabCur?(e(),a(x,{key:2,class:"cu-bar bg-white search fixed",style:k([{top:t.CustomBar+"px"}])},{default:s((()=>[n(x,{class:"search-form round"},{default:s((()=>[n(C,{class:"cuIcon-search"}),n(P,{type:"text",modelValue:t.keywords,"onUpdate:modelValue":h[0]||(h[0]=e=>t.keywords=e),placeholder:t.$t("contact.search_placeholder"),"confirm-type":"search"},null,8,["modelValue","placeholder"])])),_:1})])),_:1},8,["style"])):p("",!0),1==y.TabCur?(e(),a(j,{key:3,"scroll-y":"",class:"indexes",style:k([{top:"50px",height:"calc(100vh - "+(t.CustomBar+t.inlineTools+t.StatusBar)+"px)"}]),"scroll-with-animation":!0,"enable-back-to-top":!0},{default:s((()=>[n(x,{class:""},{default:s((()=>[n(M,{tree:y.tree,onOpenBread:b.openDep},null,8,["tree","onOpenBread"])])),_:1}),n(x,{class:"im-department-list"},{default:s((()=>[(e(!0),l(c,null,i(y.depList,((t,l)=>(e(),a(z,{class:"im-flex im-justify-content-start im-align-items-center mt-10",onClick:e=>b.openDep(t),key:l},{default:s((()=>[n(x,{class:"im-folder-bar mr-10"},{default:s((()=>[n(C,{class:"cuIcon-file color-blue"})])),_:1}),n(x,{class:"im-list-body im-border-b"},{default:s((()=>[n(x,{class:"im-list-title word"},{default:s((()=>[d(m(t.name),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128)),(e(!0),l(c,null,i(y.userList,((t,l)=>(e(),a(z,{class:"im-flex im-justify-content-start im-align-items-center mt-10",key:t.id,url:"/pages/contacts/detail?user_id="+t.id},{default:s((()=>[n(x,{class:"im-folder-bar im-image mr-10"},{default:s((()=>[n(N,{src:t.avatar,mode:"widthFix"},null,8,["src"])])),_:2},1024),n(x,{class:"im-list-body im-border-b"},{default:s((()=>[n(x,{class:"im-list-title word"},{default:s((()=>[d(m(t.realname),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["url"])))),128)),0==y.depList.length&&0==y.userList.length?(e(),a(D,{key:0})):p("",!0)])),_:1})])),_:1},8,["style"])):p("",!0),w(n(x,{class:"indexToast"},{default:s((()=>[d(m(y.listCur),1)])),_:1},512),[[I,!y.hidden]]),n(x,{class:"cu-bar tabbar bg-white shadow foot"},{default:s((()=>[(e(!0),l(c,null,i(y.navList,((t,l)=>(e(),a(x,{class:"action",onClick:e=>b.NavChange(t),key:l,"data-cur":"message"},{default:s((()=>[n(x,{class:"cuIcon-cu-image"},{default:s((()=>[n(N,{src:"/static/image/tabbar/"+[t.name]+[y.PageCur==t.name?"-active":""]+".svg"},null,8,["src"]),t.notice>0?(e(),a(x,{key:0,class:"cu-tag badge"},{default:s((()=>[d(m(t.notice),1)])),_:2},1024)):p("",!0)])),_:2},1024),n(x,{class:u(y.PageCur==t.name?"text-mauve":"text-black")},{default:s((()=>[d(m(t.title),1)])),_:2},1032,["class"])])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})}],["__scopeId","data-v-1065a68c"]]);export{V as default};
