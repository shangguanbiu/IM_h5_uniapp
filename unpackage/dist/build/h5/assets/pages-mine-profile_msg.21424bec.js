import{_ as e,a,s as t,n as s,g as l,K as n,E as o,Y as i,G as u,o as r,e as d,w as f,i as m,f as c,j as g,t as h,m as p,k as _,r as I,F as x,C as $,x as b,P as v,a7 as y,a6 as k,ab as V,Q as S,a8 as C,ap as O}from"./index-7b243064.js";import{a as A}from"./yq-avatar.62ec6229.js";const J=a(t);const N=e({components:{avatar:A},data(){return{loginStore:J,globalConfig:J.globalConfig,userInfo:{},sexList:[{id:"2",name:this.$t("mine.no_msg")},{id:"1",name:this.$t("mine.sex_nan")},{id:"0",name:this.$t("mine.sex_nv")}],saved:!1,balance:"0.00"}},mounted(){this.get_userInfo(),this.userInfo=JSON.parse(JSON.stringify(J.userInfo))},methods:{to_fengmian(){s({url:"/pages/mine/run_img"})},async get_userInfo(){const e=await this.$myRuquest({url:"/api/front/user/getUserInfo",method:"POST"});200==e.code&&(this.balance=e.data.balance)},logout(){let e=l("client_id");this.$api.LoginApi.logout({client_id:e}).then((e=>{0==e.code&&J.logout()}))},textareaBInput(e){this.userInfo.motto=e.detail.value},changeSex(e){this.userInfo.sex=parseInt(e.detail.value)},saveInfo(){if(""==this.userInfo.realname)return n({title:this.$t("mine.set_t_1"),icon:"none"}),!1;this.saved=!0;let e={realname:this.userInfo.realname,email:this.userInfo.email,sex:this.userInfo.sex,motto:this.userInfo.motto,ages:this.userInfo.ages};this.$api.msgApi.updateUserInfo(e).then((e=>{if(0==e.code){n({title:this.$t("mine.set_t_2"),icon:"none"});let e=JSON.parse(JSON.stringify(this.userInfo));J.login(e)}})),setTimeout((()=>{this.saved=!1}),8e3)},setAvatar(){s({url:"/pages/mine/avatar"})},uploadAvatar(e){o({title:this.$t("mine.set_t_1")}),i({url:this.$api.msgApi.uploadAvatar,filePath:e.path,name:"file",header:{Authorization:l("authToken")},formData:{ext:"png"},success:e=>{u();let a=JSON.parse(e.data);if(0==a.code){n({title:a.msg,icon:"none"}),this.userInfo.avatar=a.data;let e=JSON.parse(JSON.stringify(this.userInfo));J.login(e)}},fail:e=>{u()}})}}},[["render",function(e,a,t,s,l,n){const o=b("cu-custom"),i=m,u=v,A=C,J=O,N=y,U=k,j=V,T=S;return r(),d(i,null,{default:f((()=>[c(o,{bgColor:"bg-gradual-pink",isBack:!0},{backText:f((()=>[])),content:f((()=>[g(h(e.$t("mine.title")),1)])),_:1}),c(j,null,{default:f((()=>[c(i,{class:"cu-form-group"},{default:f((()=>[c(i,{class:"title"},{default:f((()=>[g(h(e.$t("mine.account")),1)])),_:1}),c(i,{class:"text-gray"},{default:f((()=>[g(h(l.userInfo.account),1)])),_:1})])),_:1}),c(i,{class:"cu-form-group"},{default:f((()=>[c(i,{class:"title"},{default:f((()=>[g(h(e.$t("mine.jifen")),1)])),_:1}),c(i,{class:"text-pink"},{default:f((()=>[g(h(l.balance),1)])),_:1})])),_:1}),c(i,{class:"cu-form-group"},{default:f((()=>[c(i,{class:"title"},{default:f((()=>[g(h(1==l.globalConfig.sysInfo.runMode?e.$t("mine.ming"):e.$t("mine.nickname")),1)])),_:1}),1==l.globalConfig.sysInfo.runMode?(r(),d(i,{key:0,class:"text-gray"},{default:f((()=>[g(h(l.userInfo.realname),1)])),_:1})):p("",!0),2==l.globalConfig.sysInfo.runMode?(r(),d(u,{key:1,class:"uni-input",style:{"text-align":"right"},modelValue:l.userInfo.realname,"onUpdate:modelValue":a[0]||(a[0]=e=>l.userInfo.realname=e),placeholder:"请输入昵称"},null,8,["modelValue"])):p("",!0)])),_:1}),c(i,{class:"cu-form-group"},{default:f((()=>[c(i,{class:"title"},{default:f((()=>[g("e-mail")])),_:1}),c(u,{class:"uni-input",style:{"text-align":"right"},modelValue:l.userInfo.email,"onUpdate:modelValue":a[1]||(a[1]=e=>l.userInfo.email=e),placeholder:e.$t("mine.emial")},null,8,["modelValue","placeholder"])])),_:1}),c(i,{class:"cu-form-group"},{default:f((()=>[c(i,{class:"title"},{default:f((()=>[g(h(e.$t("mine.age")),1)])),_:1}),c(u,{class:"uni-input",style:{"text-align":"right"},modelValue:l.userInfo.ages,"onUpdate:modelValue":a[2]||(a[2]=e=>l.userInfo.ages=e),placeholder:e.$t("mine.age_num"),type:"number"},null,8,["modelValue","placeholder"])])),_:1}),c(i,{class:"cu-form-group"},{default:f((()=>[c(i,{class:"title"},{default:f((()=>[g(h(e.$t("mine.sex")),1)])),_:1}),c(i,null,{default:f((()=>[c(N,{onChange:n.changeSex},{default:f((()=>[(r(!0),_(x,null,I(l.sexList,(e=>(r(),d(J,{class:"radio mr-10"},{default:f((()=>[c(A,{name:"sex",value:e.id,checked:l.userInfo.sex==e.id},null,8,["value","checked"]),g(" "+h(e.name),1)])),_:2},1024)))),256))])),_:1},8,["onChange"])])),_:1})])),_:1}),c(i,{class:"cu-form-group align-start"},{default:f((()=>[c(i,{class:"title"},{default:f((()=>[g(h(e.$t("mine.sine")),1)])),_:1}),c(U,{maxlength:"-1",modelValue:l.userInfo.motto,"onUpdate:modelValue":a[3]||(a[3]=e=>l.userInfo.motto=e),placeholder:e.$t("mine.sine_place")},null,8,["modelValue","placeholder"])])),_:1})])),_:1}),c(i,{class:"padding flex flex-direction"},{default:f((()=>[c(T,{class:"cu-btn bg-green lg",style:$(l.saved?"border: solid 1px #dbdada;":""),disabled:l.saved,onClick:a[4]||(a[4]=e=>n.saveInfo())},{default:f((()=>[g(h(e.$t("mine.save")),1)])),_:1},8,["style","disabled"])])),_:1})])),_:1})}]]);export{N as default};
