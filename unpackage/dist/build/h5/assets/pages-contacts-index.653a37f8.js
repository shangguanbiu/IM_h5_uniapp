import{_ as e,o as t,e as a,w as s,f as l,k as n,r as i,F as c,i as o,S as r,p as u,j as d,t as m,a0 as p,m as f,x as h,u as g,s as _,a as b,b as y,g as C,n as x,d as k,B as v,N as T,l as w,v as I,q as S,O as B,a1 as L,y as j}from"./index-bbbfa810.js";import{s as D}from"./status.e478e37a.js";const P=e({name:"breadcrum",props:{tree:{type:Array,default:()=>({})},icon:{type:String,default:()=>"cuIcon-right"}},data:()=>({}),methods:{open(e){this.$emit("openBread",e)}}},[["render",function(e,g,_,b,y,C){const x=o,k=h,v=r;return t(),a(x,null,{default:s((()=>[l(v,{class:"folder-wap","scroll-x":!0,"scroll-left":99999999},{default:s((()=>[l(x,{class:"im-flex im-justify-content-start im-align-items-center"},{default:s((()=>[(t(!0),n(c,null,i(_.tree,((n,i)=>(t(),a(x,{class:"tab-item im-flex im-justify-content-start im-align-items-center",onClick:e=>C.open(n),key:i},{default:s((()=>[l(x,{class:u(["mar10 lz-tree-name font-color-999",{"font-color-333":i==_.tree.length-1}])},{default:s((()=>[d(m(n.name),1)])),_:2},1032,["class"]),p(e.$slots,"icon",{},(()=>[i<_.tree.length-1?(t(),a(k,{key:0,class:u(["font-color-999",[_.icon?_.icon:"cuIcon-right"]])},null,8,["class"])):f("",!0)]),!0)])),_:2},1032,["onClick"])))),128))])),_:3})])),_:3})])),_:3})}],["__scopeId","data-v-b66ec5ca"]]),M=g(_),N=b(_),{unread:O,contacts:V,sysUnread:z}=y(M);const A=e({components:{breadcurm:P,statusPoint:D},name:"contacts",props:{},data:()=>({PageCur:"contacts",navList:[{name:"home",title:"首页",notice:0},{name:"message",title:"消息",notice:O},{name:"serve",title:"客服",notice:0},{name:"contacts",title:"通讯录",notice:z},{name:"mine",title:"我的",notice:0}],TabCur:0,tabbarH:50,hidden:!0,listCurID:"",list:[],listCur:"",total:0,scrollLeft:0,msgs:V,unread:z,globalConfig:N.globalConfig,appSetting:N.appSetting,tree:[{id:1,name:"技术部"},{id:2,name:"产品部"},{id:3,name:"信息部"}],depList:[{id:1,name:"技术部"},{id:2,name:"财务部"}],userList:[{id:1,realname:"张三",avatar:"https://api.multiavatar.com/raingad1.png?apikey=zdvXV3W4MjwhP9"},{id:2,realname:"李四",avatar:"https://api.multiavatar.com/raingad2.png?apikey=zdvXV3W4MjwhP9"}],tabList:["普通通讯录","企业通讯录"],contacts:[],userinfo:{}}),watch:{msgs(e){this.initContacts(e)}},created(){this.listCur=this.contacts[0]},mounted(){this.initContacts(this.msgs),this.userinfo=C("userInfo")},methods:{NavChange:function(e){"mine"==e.name?x({url:"/pages/mine/index"}):"message"==e.name?x({url:"/pages/index/mv_index"}):"compass"==e.name?x({url:"/pages/compass/index"}):"home"==e.name?k({url:"/pages/index/index"}):"serve"==e.name&&x({url:"/pages/movie/kefu/kefu"})},initContacts(e){const t=JSON.parse(JSON.stringify(e)).filter((e=>0==e.is_group));this.total=t.length;const a=t.sort(((e,t)=>"#"===e.index?1:"#"===t.index?-1:e.index.localeCompare(t.index,"zh"))).reduce(((e,t)=>{const a=t.index,s=e.findIndex((e=>e.name===a));return-1===s?e.push({name:a,children:[t]}):e[s].children.push(t),e}),[]);this.contacts=a},openDep(e){},openDetails(e){x({url:"/pages/contacts/detail?id="+e.id})},openGroup(){x({url:"/pages/contacts/group"})},openFriend(){x({url:"/pages/contacts/friend"})},tabSelect(e){this.TabCur=e.currentTarget.dataset.id,this.scrollLeft=60*(e.currentTarget.dataset.id-1)},getCur(e){this.hidden=!1,this.listCur=this.contacts[e.target.id].name},setCur(e){this.hidden=!0,this.listCur=this.listCur},tMove(e){let t=e.touches[0].clientY,a=this.boxTop,s=this;if(t>a){let e=parseInt((t-a)/20);this.listCur=s.contacts[e].name}},tStart(){this.hidden=!1},tEnd(){this.hidden=!0,this.listCurID=this.listCur},indexSelect(e){let t=this,a=this.barHeight,s=this.contacts,l=Math.ceil(s.length*e.detail.y/a);for(let n=0;n<s.length;n++)if(l<n+1)return t.listCur=s[n].name,t.movableY=20*n,!1}}},[["render",function(e,p,g,_,b,y){const C=o,x=h,k=S("statusPoint"),D=S("Empty"),P=r,M=B,N=S("breadcurm"),O=L,V=j;return t(),a(C,null,{default:s((()=>[0==b.TabCur?(t(),a(P,{key:0,"scroll-y":"",class:"indexes","scroll-into-view":"indexes-"+b.listCurID,style:v([{height:"calc(100vh - "+(e.CustomBar+e.inlineTools+e.StatusBar)+"px)"}]),"scroll-with-animation":!0,"enable-back-to-top":!0},{default:s((()=>[l(C,{style:{"padding-bottom":"30rpx"}},{default:s((()=>[l(C,{class:"cu-list menu"},{default:s((()=>[2==b.globalConfig.sysInfo.runMode&&1==b.userinfo.role?(t(),a(C,{key:0,class:"cu-item arrow",onClick:y.openFriend},{default:s((()=>[l(C,{class:u(["cu-avatar mr-15 invite-bg",b.appSetting.circleAvatar?"round":"radius"])},null,8,["class"]),l(C,{class:"content"},{default:s((()=>[l(x,{class:"c-333"},{default:s((()=>[d("新邀请")])),_:1})])),_:1}),l(C,{class:"action"},{default:s((()=>[b.unread>0?(t(),a(C,{key:0,class:"cu-tag round bg-red sm"},{default:s((()=>[d(m(b.unread),1)])),_:1})):f("",!0)])),_:1})])),_:1},8,["onClick"])):f("",!0),l(C,{class:"cu-item arrow",onClick:y.openGroup},{default:s((()=>[l(C,{class:u(["cu-avatar mr-15 group-bg",b.appSetting.circleAvatar?"round":"radius"])},null,8,["class"]),l(C,{class:"content"},{default:s((()=>[l(x,{class:"c-333"},{default:s((()=>[d("群聊")])),_:1})])),_:1})])),_:1},8,["onClick"])])),_:1}),(t(!0),n(c,null,i(b.contacts,((e,o)=>(t(),a(C,{key:o,class:u("indexItem-"+e.name),id:"indexes-"+e.name,"data-index":e.name},{default:s((()=>[l(C,{class:"padding"},{default:s((()=>[d(m(e.name),1)])),_:2},1024),l(C,{class:"cu-list menu no-padding"},{default:s((()=>[(t(!0),n(c,null,i(e.children,((e,n)=>(t(),a(C,{class:"cu-item",key:n,onClick:t=>y.openDetails(e)},{default:s((()=>[l(C,{class:u(["cu-avatar mr-15",b.appSetting.circleAvatar?"round":"radius"]),style:v([{backgroundImage:"url("+e.avatar+")"}])},null,8,["class","style"]),l(C,{class:"content"},{default:s((()=>[l(C,{class:"c-333"},{default:s((()=>[e.is_online&&0==e.is_group&&1==b.globalConfig.chatInfo.online?(t(),a(k,{key:0,type:"success"})):f("",!0),d(" "+m(e.displayName),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:2},1024)])),_:2},1032,["class","id","data-index"])))),128)),l(C,{class:"text-center m-20 text-grey"},{default:s((()=>[d(m(b.total)+" 个朋友",1)])),_:1}),b.contacts.length?f("",!0):(t(),a(D,{key:0,noDatatext:"暂无联系人",textcolor:"#999"}))])),_:1})])),_:1},8,["scroll-into-view","style"])):f("",!0),0==b.TabCur?(t(),a(C,{key:1,class:"indexBar",style:v([{height:"calc(100vh - "+e.CustomBar+"px - 50px)"}])},{default:s((()=>[l(C,{class:"indexBar-box",onTouchstart:y.tStart,onTouchend:y.tEnd,onTouchmove:T(y.tMove,["stop"])},{default:s((()=>[(t(!0),n(c,null,i(b.contacts,((e,l)=>(t(),a(C,{class:"indexBar-item",key:l,id:l,onTouchstart:y.getCur,onTouchend:y.setCur},{default:s((()=>[d(m(e.name),1)])),_:2},1032,["id","onTouchstart","onTouchend"])))),128))])),_:1},8,["onTouchstart","onTouchend","onTouchmove"])])),_:1},8,["style"])):f("",!0),1==b.TabCur?(t(),a(C,{key:2,class:"cu-bar bg-white search fixed",style:v([{top:e.CustomBar+"px"}])},{default:s((()=>[l(C,{class:"search-form round"},{default:s((()=>[l(x,{class:"cuIcon-search"}),l(M,{type:"text",modelValue:e.keywords,"onUpdate:modelValue":p[0]||(p[0]=t=>e.keywords=t),placeholder:"输入搜索的关键词","confirm-type":"search"},null,8,["modelValue"])])),_:1})])),_:1},8,["style"])):f("",!0),1==b.TabCur?(t(),a(P,{key:3,"scroll-y":"",class:"indexes",style:v([{top:"50px",height:"calc(100vh - "+(e.CustomBar+e.inlineTools+e.StatusBar)+"px)"}]),"scroll-with-animation":!0,"enable-back-to-top":!0},{default:s((()=>[l(C,{class:""},{default:s((()=>[l(N,{tree:b.tree,onOpenBread:y.openDep},null,8,["tree","onOpenBread"])])),_:1}),l(C,{class:"im-department-list"},{default:s((()=>[(t(!0),n(c,null,i(b.depList,((e,n)=>(t(),a(O,{class:"im-flex im-justify-content-start im-align-items-center mt-10",onClick:t=>y.openDep(e),key:n},{default:s((()=>[l(C,{class:"im-folder-bar mr-10"},{default:s((()=>[l(x,{class:"cuIcon-file color-blue"})])),_:1}),l(C,{class:"im-list-body im-border-b"},{default:s((()=>[l(C,{class:"im-list-title word"},{default:s((()=>[d(m(e.name),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128)),(t(!0),n(c,null,i(b.userList,((e,n)=>(t(),a(O,{class:"im-flex im-justify-content-start im-align-items-center mt-10",key:e.id,url:"/pages/contacts/detail?user_id="+e.id},{default:s((()=>[l(C,{class:"im-folder-bar im-image mr-10"},{default:s((()=>[l(V,{src:e.avatar,mode:"widthFix"},null,8,["src"])])),_:2},1024),l(C,{class:"im-list-body im-border-b"},{default:s((()=>[l(C,{class:"im-list-title word"},{default:s((()=>[d(m(e.realname),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["url"])))),128)),0==b.depList.length&&0==b.userList.length?(t(),a(D,{key:0})):f("",!0)])),_:1})])),_:1},8,["style"])):f("",!0),w(l(C,{class:"indexToast"},{default:s((()=>[d(m(b.listCur),1)])),_:1},512),[[I,!b.hidden]]),l(C,{class:"cu-bar tabbar bg-white shadow foot"},{default:s((()=>[(t(!0),n(c,null,i(b.navList,((e,n)=>(t(),a(C,{class:"action",onClick:t=>y.NavChange(e),key:n,"data-cur":"message"},{default:s((()=>[l(C,{class:"cuIcon-cu-image"},{default:s((()=>[l(V,{src:"/static/image/tabbar/"+[e.name]+[b.PageCur==e.name?"-active":""]+".svg"},null,8,["src"]),e.notice>0?(t(),a(C,{key:0,class:"cu-tag badge"},{default:s((()=>[d(m(e.notice),1)])),_:2},1024)):f("",!0)])),_:2},1024),l(C,{class:u(b.PageCur==e.name?"text-mauve":"text-black")},{default:s((()=>[d(m(e.title),1)])),_:2},1032,["class"])])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})}],["__scopeId","data-v-fbc2bbe2"]]);export{A as default};
