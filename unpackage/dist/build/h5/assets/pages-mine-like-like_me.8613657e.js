import{_ as t,a as e,s,n as a,g as i,K as l,o,e as n,w as d,i as _,f as r,j as c,t as u,k as p,r as h,F as f,l as k,v as m,m as y,x,z as g,P as w,Q as $}from"./index-d8cdb88b.js";import{_ as b}from"./common.b05f9007.js";import{_ as v,a as U}from"./nan.89d00671.js";import{_ as I,a as C}from"./nan_b.1f2ad1df.js";const O=e(s);const S=t({data(){return{pop_notice:!1,notice_type:1,notice_content:this.$t("pop.content4"),paddingB:0,total:0,params:{page:1,limit:10,is_mine:0},list:[],iflike:!1,had_likes:[],show_talk:!1,talk_data:{},fromUserid:"",fromUser:"",send_content:"",host:""}},methods:{bet_talk(t){this.show_talk=!0,this.talk_data=t},pop_ok(){a({url:"/pages/movie/kefu/kefu"})},getList(){this.$api.third_openApi.like_me_index(this.params).then((t=>{if(0==t.code){let e=t.data.data;this.total=t.count,e.forEach((t=>{this.$set(t,"iflike",!1),this.$set(t,"isfar",(1.5*Math.random()+1).toFixed(2)),this.$set(t,"ifonline",Math.random()>=.5),this.$set(t,"istime",(.5*Math.random()+1).toFixed(2)),this.had_likes.forEach((e=>{t.account==e&&(t.iflike=!0)}))})),this.fromUser.islevel<22?this.list=e.slice(0,5):this.list=e}}))},setLike(t,e,s){var a={type:t,user_id:i("userInfo").user_id,user_account:e};1==t&&this.$api.third_openApi.near_user_like(a).then((t=>{0==t.code&&(this.list[s].iflike=!0)}))},async check_if_friend(t){if(0==this.fromUser.istalk&&0==this.fromUser.role)return this.pop_notice=!0,void(this.notice_type=1);var e=new Array;e.push(this.fromUser.user_id),e.push(t);200==(await this.$myRuquest({url:"/api/front/index/saveImUser",method:"POST",data:{users:e.toString()}})).code&&this.sendMessage(t)},sendMessage(t){let e={id:this.$util.getUuid(),is_group:0,fromUser:this.fromUser,type:"text",toContactId:t,content:this.send_content,sendTime:(new Date).getTime()};this.$api.msgApi.sendMessage(e).then((t=>{0==t.code?(this.show_talk=!1,this.notice_content=this.$t("pop.content6"),this.pop_notice=!0,this.notice_type=2,this.count_number()):l({title:t.msg,icon:"none"})})).catch((t=>{}))},async count_number(){let t=JSON.parse(JSON.stringify(O.userInfo));200==(await this.$myRuquest({url:"/api/front/index/changeImUserData",method:"POST",data:{user_id:t.user_id,column:"istalk"}})).code&&this.get_userinfo()},async get_userinfo(){let t=JSON.parse(JSON.stringify(O.userInfo));const e=await this.$myRuquest({url:"/api/front/index/getImUserInfo",method:"POST",data:{user_id:t.user_id}});if(200==e.code){this.fromUser=e.data;let t=JSON.parse(JSON.stringify(e.data));O.login(t)}}},created(){this.paddingB=this.inlineTools,this.getList();var t=i("userInfo");this.had_likes=t.islikes.split(","),this.fromUser=i("userInfo"),this.host=this.$imgurl()}},[["render",function(t,e,s,a,i,l){const O=x("cu-custom"),S=g,F=_,T=x("Empty"),j=w,J=$;return o(),n(F,null,{default:d((()=>[r(O,{bgColor:"bg-gradual-pink",isBack:!0},{backText:d((()=>[])),content:d((()=>[c(u(t.$t("like.title2")),1)])),_:1}),0!==i.list.length?(o(),n(F,{key:0},{default:d((()=>[(o(!0),p(f,null,h(i.list,((e,s)=>k((o(),n(F,{class:"user_line",key:s},{default:d((()=>[r(F,{class:"user_l"},{default:d((()=>[null!==e.avatar?(o(),n(S,{key:0,src:i.host+e.avatar,style:{width:"80px",height:"80px","border-radius":"50%"}},null,8,["src"])):(o(),n(S,{key:1,src:b,style:{width:"80px",height:"80px","border-radius":"50%"}})),r(F,{class:"item_like"},{default:d((()=>[e.ifonline?(o(),n(F,{key:0,class:"cuIcon-title",onClick:t=>l.setLike(2,e.account,s)},null,8,["onClick"])):y("",!0)])),_:2},1024)])),_:2},1024),r(F,{class:"user_r"},{default:d((()=>[r(F,{class:"item_name"},{default:d((()=>[r(F,{style:{display:"flex"}},{default:d((()=>[0==e.sex?(o(),n(F,{key:0,class:"sex_ico"},{default:d((()=>[r(S,{src:v,style:{width:"100%"},mode:"widthFix"})])),_:1})):y("",!0),1==e.sex?(o(),n(F,{key:1,class:"sex_ico"},{default:d((()=>[r(S,{src:U,style:{width:"100%"},mode:"widthFix"})])),_:1})):y("",!0),c(" "+u(e.realname),1)])),_:2},1024),r(F,{class:"col_96",style:{display:"flex",width:"150px","justify-content":"flex-end"}},{default:d((()=>[r(F,null,{default:d((()=>[c(u(e.isfar)+"km · ",1)])),_:2},1024),e.ifonline?(o(),n(F,{key:0},{default:d((()=>[c(u(t.$t("like.like_msg_1")),1)])),_:1})):y("",!0),e.ifonline?y("",!0):(o(),n(F,{key:1},{default:d((()=>[c(u(e.istime)+u(t.$t("like.like_msg_2")),1)])),_:2},1024))])),_:2},1024)])),_:2},1024),r(F,{style:{margin:"5px 0","text-align":"right"}},{default:d((()=>[r(F,{class:"item_btn",onClick:t=>l.bet_talk(e)},{default:d((()=>[c(u(t.$t("like.talk")),1)])),_:2},1032,["onClick"])])),_:2},1024),""!==e.motto&&null!==e.motto?(o(),n(F,{key:0,class:"motto"},{default:d((()=>[c(u(t.$t("like.sine"))+"："+u(e.motto),1)])),_:2},1024)):y("",!0)])),_:2},1024)])),_:2},1024)),[[m,s<4]]))),128))])),_:1})):(o(),n(T,{key:1,noDatatext:t.$t("like.no_data"),textcolor:"#999"},null,8,["noDatatext"])),k(r(F,null,{default:d((()=>[r(F,{class:"com_bg",onClick:e[0]||(e[0]=t=>i.show_talk=!1)}),r(F,{class:"talk_mian"},{default:d((()=>[r(F,{style:{width:"90%",margin:"auto"}},{default:d((()=>[r(F,{class:"talk_ico"},{default:d((()=>[null!==i.talk_data.avatar?(o(),n(S,{key:0,src:i.talk_data.avatar,style:{width:"100%","border-radius":"50%",height:"80px"},mode:"widthFix"},null,8,["src"])):(o(),n(S,{key:1,src:b,style:{width:"100%","border-radius":"50%",height:"80px"},mode:"widthFix"}))])),_:1}),r(F,{class:"talk_name"},{default:d((()=>[c(u(i.talk_data.realname),1)])),_:1}),r(F,{class:"talk_desc"},{default:d((()=>[0==i.talk_data.sex?(o(),n(F,{key:0,class:"talk_sex p_type1"},{default:d((()=>[r(F,{class:"sex_ico"},{default:d((()=>[r(S,{src:I,style:{width:"100%"},mode:"widthFix"})])),_:1}),r(F,{style:{"line-height":"25px"}},{default:d((()=>[c(u(i.talk_data.ages),1)])),_:1})])),_:1})):y("",!0),1==i.talk_data.sex?(o(),n(F,{key:1,class:"talk_sex p_type1"},{default:d((()=>[r(F,{class:"sex_ico"},{default:d((()=>[r(S,{src:C,style:{width:"100%"},mode:"widthFix"})])),_:1}),r(F,{style:{"line-height":"25px"}},{default:d((()=>[c(u(i.talk_data.ages),1)])),_:1})])),_:1})):y("",!0),2==i.talk_data.sex?(o(),n(F,{key:2,class:"talk_sex p_type3"},{default:d((()=>[r(F,{style:{"line-height":"25px"}},{default:d((()=>[c(u(i.talk_data.ages),1)])),_:1})])),_:1})):y("",!0),r(F,{class:"talk_sex p_type3"},{default:d((()=>[r(F,{style:{"line-height":"25px"}},{default:d((()=>[c("vip-"+u(i.talk_data.islevel),1)])),_:1})])),_:1})])),_:1}),r(F,{class:"talk_form"},{default:d((()=>[r(F,{style:{"padding-left":"10px"}},{default:d((()=>[r(j,{placeholder:t.$t("like.talk_desc_1"),style:{height:"32px","font-size":"14px"},maxlength:"32",name:"input",modelValue:i.send_content,"onUpdate:modelValue":e[1]||(e[1]=t=>i.send_content=t)},null,8,["placeholder","modelValue"])])),_:1}),r(F,null,{default:d((()=>[r(J,{class:"cu-btn bg-blue shadow",onClick:e[2]||(e[2]=t=>l.check_if_friend(i.talk_data.user_id))},{default:d((()=>[c(u(t.$t("like.send")),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},512),[[m,i.show_talk]]),k(r(F,null,{default:d((()=>[r(F,{class:"com_bg"}),r(F,{class:"com_main"},{default:d((()=>[r(F,{class:"pop_mian"},{default:d((()=>[r(F,{class:"pop_title"},{default:d((()=>[c(u(t.$t("pop.title")),1)])),_:1}),r(F,{style:{padding:"10px 15px","line-height":"25px","flex-wrap":"wrap","text-align":"center"}},{default:d((()=>[c(u(i.notice_content),1)])),_:1}),r(F,{class:"pop_foot"},{default:d((()=>[1==i.notice_type?(o(),n(F,{key:0,class:"pop_ft_btn1",onClick:e[3]||(e[3]=t=>i.pop_notice=!1)},{default:d((()=>[c(u(t.$t("pop.close")),1)])),_:1})):y("",!0),1==i.notice_type?(o(),n(F,{key:1,class:"pop_ft_btn2",onClick:e[4]||(e[4]=t=>l.pop_ok())},{default:d((()=>[c(u(t.$t("pop.up")),1)])),_:1})):y("",!0),2==i.notice_type?(o(),n(F,{key:2,class:"pop_ft_btn2",onClick:e[5]||(e[5]=t=>i.pop_notice=!1)},{default:d((()=>[c(u(t.$t("pop.ok")),1)])),_:1})):y("",!0)])),_:1})])),_:1})])),_:1})])),_:1},512),[[m,i.pop_notice]])])),_:1})}],["__scopeId","data-v-934b5656"]]);export{S as default};
