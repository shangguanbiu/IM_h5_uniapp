import{_ as e,n as t,J as a,o as i,e as s,w as l,p as n,i as u,f as _,j as o,t as r,m as d,k as m,r as f,F as c,l as h,v as p,O as b,P as y}from"./index-bb9aa3b8.js";const g=e({data:()=>({pop_notice:!1,scroll_ft:!1,pop_bet:!1,index_ico:"@/static/image/shouye.png",index_ico_h:"",cz_ico:"",cz_ico_h:"",kf_ico:"",kf_ico_h:"",user_ico:"",user_ico_h:"",bet_num:"",max_num:0,qishu:"",qishu_id:"",ifrun:!0,ifhistory:!1,history_list:[],Number_arr:[{name:"春",value:1,ifhad:!1},{name:"夏",value:2,ifhad:!1},{name:"秋",value:3,ifhad:!1},{name:"冬",value:4,ifhad:!1}],Number_laster:[],cost_arr:[10,50,100,200,500,1e3],userinfo:{},time1:0,time2:0,time3:0,time_build:null,if_over:!1,pageHeight:0}),watch:{watch:{$route(e){e.fullPath}},bet_num(e){Number(e)>this.max_num?this.bet_num=this.max_num:this.bet_num=e},time3:function(e){var t=this;if(0==this.time1&&0==this.time2&&e<8&&(this.ifrun=!1),this.time2==e&&0==e)return this.if_over=!0,this.ifrun=!1,clearInterval(this.time_build),this.time_build=null,void setTimeout((function(){t.getNewOpenData()}),3e3);(e<0||NaN==e||"NaN"==e)&&(this.ifrun=!1,clearInterval(this.time_build),this.time_build=null,setTimeout((function(){t.getNewOpenData()}),3e3))}},methods:{change_num(e){},showtime(e,t){if(""!==t){var a=new Date,i=new Date(t).getTime()-a.getTime(),s=Math.floor(i/864e5),l=Math.floor(i/36e5%24),n=Math.floor(i/6e4%60),u=Math.floor(i/1e3%60);return this.time1=l,this.time2=n,this.time3=u,s+"天"+l+":"+n+":"+u}},jump(e){1==e?t({url:"/pages/movie/index/index"}):2==e?t({url:"/pages/movie/list/index"}):3==e?t({url:"/pages/movie/bet/bet"}):4==e?t({url:"/pages/kefu/kefu_index"}):5==e&&t({url:"/pages/mine/index"})},see_list(){t({url:"/pages/movie/bet/list"})},get_bet_num(e,t){this.Number_arr[t].ifhad?this.Number_arr[t].ifhad=!1:this.Number_arr[t].ifhad=!0;const a=this.Number_arr.find((e=>1==e.ifhad));this.pop_bet=void 0!==a,this.pageHeight<820&&1==this.pop_bet&&(this.scroll_ft=!0)},get_num(e){this.bet_num=e},reset(){this.bet_num=""},async get_userInfo(){const e=await this.$myRuquest({url:"/api/front/user/getUserInfo",method:"POST"});200==e.code&&(this.userinfo=e.data,this.max_num=this.userinfo.balance)},async getNewOpenData(){const e=await this.$myRuquest({url:"/api/front/movie/getNewOpenData",method:"POST"});200==e.code&&(this.qishu=e.data.open_no,this.qishu_id=e.data.id,this.time_build=setInterval((()=>{this.showtime("",e.data.open_time)}),1e3),this.ifrun=!0)},async getOpenData(){const e=await this.$myRuquest({url:"/api/front/movie/getActionDetail",method:"POST"});200==e.code&&(this.qishu=e.data.next_open_data.open_no,this.qishu_id=e.data.next_open_data.id,this.time_build=setInterval((()=>{this.showtime("",e.data.next_open_data.open_time)}),1e3))},async getHistoryOpenData(){const e=await this.$myRuquest({url:"/api/front/movie/getHistoryOpenData",method:"POST",data:{page:1,pagesize:10}});200==e.code&&(this.Number_laster=e.data.data)},async submit_bet(){if(Number(this.bet_num)>Number(this.max_num))return void a({title:"积分不足！",icon:"none"});if(Number(this.bet_num)<0||0==Number(this.bet_num))return void a({title:"请输入积分！",icon:"none"});let e=new Array;if(this.Number_arr.forEach((t=>{1==t.ifhad&&e.push(t.value)})),0==e.length)return void a({title:"请选择投票对象！",icon:"none"});200==(await this.$myRuquest({url:"/api/front/order/createOrder",method:"POST",data:{next_open_id:this.qishu_id,multiple_id:e.toString(),amount:Number(this.bet_num)}})).code&&(a({title:"投票成功！",icon:"success"}),this.Number_arr.forEach((e=>{e.ifhad=!1})),this.get_userInfo())},run_fun(){this.get_userInfo(),this.getOpenData(),this.getHistoryOpenData()}},onLoad(){this.pop_notice=!1;var e=document.getElementsByClassName("uni-page-head-hd")[0];e&&(e.style.display="none")},mounted(){this.pageHeight=document.documentElement.clientHeight}},[["render",function(e,t,a,g,x,k){const v=u,N=b,w=y;return i(),s(v,{class:n({scroll_ft:x.scroll_ft})},{default:l((()=>[_(v,{class:"bet_top"},{default:l((()=>[_(v,{style:{padding:"10px  15px"}},{default:l((()=>[_(v,{class:"bet_line bet_ge"},{default:l((()=>[_(v,null,{default:l((()=>[o("当前期数")])),_:1})])),_:1}),_(v,{style:{display:"flex","align-items":"center"},class:"bet_ge"},{default:l((()=>[_(v,{style:{"font-weight":"bold","font-size":"16px","margin-right":"3px"}},{default:l((()=>[o(r(x.qishu),1)])),_:1}),x.ifrun?(i(),s(v,{key:0},{default:l((()=>[o("投票中")])),_:1})):d("",!0),x.ifrun?d("",!0):(i(),s(v,{key:1},{default:l((()=>[o("封盘中")])),_:1}))])),_:1}),_(v,{class:"time"},{default:l((()=>[o(r(x.time2+":"+x.time3),1)])),_:1}),_(v,{class:"bet_line bet_ge"},{default:l((()=>[(i(!0),m(c,null,f(x.Number_laster.slice(0,1),((e,t)=>(i(),s(v,{style:{display:"flex"},key:t},{default:l((()=>[_(v,{style:{"margin-right":"10px"}},{default:l((()=>[o(r(e.open_no),1)])),_:2},1024),e.number<4||4==e.number?(i(),s(v,{key:0,class:"color_n1"},{default:l((()=>[o("春")])),_:1})):d("",!0),e.number>5||5==e.number?(i(),s(v,{key:1,class:"color_n2"},{default:l((()=>[o("夏")])),_:1})):d("",!0),e.number%2==1?(i(),s(v,{key:2,class:"color_n1"},{default:l((()=>[o("秋")])),_:1})):d("",!0),e.number%2==0?(i(),s(v,{key:3,class:"color_n2"},{default:l((()=>[o("冬")])),_:1})):d("",!0)])),_:2},1024)))),128)),_(v,{onClick:t[0]||(t[0]=e=>x.ifhistory=!x.ifhistory),style:{display:"flex"}},{default:l((()=>[o("历史出票 "),x.ifhistory?d("",!0):(i(),s(v,{key:0,class:"cuIcon-unfold",style:{"line-height":"19px","margin-left":"2px"}})),x.ifhistory?(i(),s(v,{key:1,class:"cuIcon-fold",style:{"line-height":"19px","margin-left":"2px"}})):d("",!0)])),_:1}),h(_(v,{class:"history_are",onClick:t[1]||(t[1]=e=>x.ifhistory=!1)},{default:l((()=>[0!==x.Number_laster.length?(i(),s(v,{key:0,style:{padding:"0px 15px"}},{default:l((()=>[(i(!0),m(c,null,f(x.Number_laster,((e,t)=>(i(),s(v,{style:{display:"flex",padding:"5px 0"},key:t},{default:l((()=>[_(v,{style:{"margin-right":"10px"}},{default:l((()=>[o(r(e.open_no),1)])),_:2},1024),e.number<4||4==e.number?(i(),s(v,{key:0,class:"color_n1"},{default:l((()=>[o("春")])),_:1})):d("",!0),e.number>5||5==e.number?(i(),s(v,{key:1,class:"color_n2"},{default:l((()=>[o("夏")])),_:1})):d("",!0),e.number%2==1?(i(),s(v,{key:2,class:"color_n1"},{default:l((()=>[o("秋")])),_:1})):d("",!0),e.number%2==0?(i(),s(v,{key:3,class:"color_n2"},{default:l((()=>[o("冬")])),_:1})):d("",!0)])),_:2},1024)))),128))])),_:1})):d("",!0)])),_:1},512),[[p,x.ifhistory]])])),_:1})])),_:1})])),_:1}),_(v,{class:"bet_top_ft"},{default:l((()=>[_(v,{class:"bet_t_ft_m",onClick:t[2]||(t[2]=e=>x.pop_notice=!0)},{default:l((()=>[o("投票规则")])),_:1}),_(v,{class:"bet_t_ft_m",onClick:k.see_list,style:{display:"flex","justify-content":"center",color:"#e6557f"}},{default:l((()=>[o(" 我的出票 "),_(v,{class:"cuIcon-right",style:{"line-height":"40px","margin-left":"2px"}})])),_:1},8,["onClick"])])),_:1}),_(v,{class:"bet_main"},{default:l((()=>[(i(!0),m(c,null,f(x.Number_arr,((e,t)=>(i(),s(v,{class:"bet_mainzi",key:t},{default:l((()=>[_(v,{class:n(["bet_zi",{bet_zi_get:e.ifhad}]),onClick:a=>k.get_bet_num(e,t)},{default:l((()=>[o(r(e.name),1)])),_:2},1032,["class","onClick"])])),_:2},1024)))),128))])),_:1}),h(_(v,{class:"bet_foot"},{default:l((()=>[_(v,{class:"bet_f_m"},{default:l((()=>[_(v,{class:"bet_f_mtit"},{default:l((()=>[_(v,null,{default:l((()=>[o("快捷投票")])),_:1}),_(v,{class:"had_num"},{default:l((()=>[o("可用积分:"+r(x.max_num),1)])),_:1})])),_:1}),_(v,{class:"bet_num_line"},{default:l((()=>[(i(!0),m(c,null,f(x.cost_arr,((e,t)=>(i(),s(v,{class:"bet_num",key:t,onClick:t=>k.get_num(e)},{default:l((()=>[o(r(e),1)])),_:2},1032,["onClick"])))),128))])),_:1}),_(v,{class:"bet_num_line",style:{padding:"15px 0"}},{default:l((()=>[_(v,{style:{"line-height":"30px"}},{default:l((()=>[o("投票积分:")])),_:1}),_(v,null,{default:l((()=>[_(N,{class:"uni-input inmut_l",modelValue:x.bet_num,"onUpdate:modelValue":t[3]||(t[3]=e=>x.bet_num=e),onInput:t[4]||(t[4]=e=>k.change_num(x.bet_num)),type:"number",placeholder:""},null,8,["modelValue"])])),_:1}),_(v,null,{default:l((()=>[_(w,{type:"default",class:"reset_btn",onClick:k.reset},{default:l((()=>[o("重置")])),_:1},8,["onClick"])])),_:1})])),_:1}),x.ifrun?(i(),s(w,{key:0,type:"default",class:"ok_btn",onClick:k.submit_bet},{default:l((()=>[o("投票")])),_:1},8,["onClick"])):d("",!0),x.ifrun?d("",!0):(i(),s(w,{key:1,type:"default",class:"ok_btn2"},{default:l((()=>[o("封盘中")])),_:1}))])),_:1})])),_:1},512),[[p,x.pop_bet]]),h(_(v,null,{default:l((()=>[_(v,{class:"com_bg"}),_(v,{class:"com_main"},{default:l((()=>[_(v,{class:"pop_mian"},{default:l((()=>[_(v,{class:"pop_title"},{default:l((()=>[o("投票规则")])),_:1}),_(v,{style:{padding:"10px 15px",display:"flex","justify-content":"flex-start","line-height":"25px","flex-wrap":"wrap"}},{default:l((()=>[o(" 游戏投票规则 ")])),_:1}),_(v,{class:"pop_foot"},{default:l((()=>[_(v,{class:"pop_ft_btn2",onClick:t[5]||(t[5]=e=>x.pop_notice=!1)},{default:l((()=>[o("确定")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},512),[[p,x.pop_notice]])])),_:1},8,["class"])}],["__scopeId","data-v-3ecf36f5"]]);export{g as default};
