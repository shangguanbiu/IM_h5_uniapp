import{_ as t,u as e,s as a,a as l,n as s,a9 as n,K as c,D as i,V as o,o as d,e as u,w as r,i as f,f as _,j as g,t as m,C as p,m as h,k,F as x,q as b,l as $,v as y,x as C,y as I,Q as v}from"./index-7b243064.js";const N=e(a),w=l(a);const F=t({data:()=>({modelName:"",detail:{},userInfo:w.userInfo,globalConfig:w.globalConfig}),computed:{validatePhone(){return/^1[3456789]\d{9}$/.test(this.detail.account)}},onLoad(t){this.pop_notice=!1,this.$api.msgApi.getUserInfo({user_id:t.id}).then((t=>{0==t.code&&(this.detail=t.data)}))},methods:{sendMsg(t){s({url:"/pages/message/chat?id="+t.user_id})},sex(t){return[this.$t("contact.sex_nv"),this.$t("contact.sex_nan"),this.$t("contact.no_msg")][t]||this.$t("contact.no_msg")},callPhone(){let t=JSON.parse(JSON.stringify(w.userInfo));0!=t.islevel||1===t.role?n({phoneNumber:this.detail.account}):this.pop_notice=!0},calling(t){let e=JSON.parse(JSON.stringify(w.userInfo));if(0==e.islevel&&1!==e.role)return void(this.pop_notice=!0);if(N.webrtcLock)return c({title:this.$t("contact.other"),icon:"none"});this.modelName="";let a=this.$util.getUuid();s({url:"/pages/message/call?msg_id="+a+"&type="+t+"&status=1&id="+this.detail.user_id+"&name="+this.detail.realname+"&avatar="+encodeURI(this.detail.avatar)})},delFriend(){i({title:this.$t("contact.sure_del"),success:t=>{if(t.confirm){let t={id:this.detail.user_id};this.$api.friendApi.delFriend(t).then((e=>{0==e.code&&(N.deleteContacts(t),o({url:"/pages/index/index"}))}))}}})},addFriend(){i({title:this.$t("contact.check_msg"),editable:!0,success:t=>{if(t.confirm){if(""==t.content)return c({title:this.$t("contact.check_remark"),icon:"error"});this.$api.friendApi.addFriend({user_id:this.detail.user_id,remark:t.content}).then((t=>{0==t.code&&c({title:t.msg,icon:"none"})}))}}})},setNickname(){let t=this.detail.friend.friend_id??"";if(!this.detail.friend)return c({title:this.$t("contact.can_not_set"),icon:"error"});i({title:this.$t("contact.check_remark2"),editable:!0,success:e=>{if(e.confirm){if(""==e.content)return c({title:this.$t("contact.check_remark3"),icon:"error"});this.$api.friendApi.setNickname({friend_id:t,nickname:e.content}).then((t=>{0==t.code&&(this.detail.friend.nickname=e.content,c({title:t.msg,icon:"none"}))}))}}})}}},[["render",function(t,e,a,l,s,n){const c=C("cu-custom"),i=f,o=I,N=v;return d(),u(i,null,{default:r((()=>[_(c,{bgColor:"bg-gradual-pink",isBack:!0},{backText:r((()=>[])),content:r((()=>[g(m(t.$t("contact.title")),1)])),_:1}),_(i,{class:"padding flex justify-start align-center"},{default:r((()=>[_(i,{class:"cu-avatar lg radius mr-15",style:p("background-image:url("+s.detail.avatar+")")},null,8,["style"]),_(i,{class:"im-flex im-justify-content-start im-columns"},{default:r((()=>[_(i,{class:"mb-5"},{default:r((()=>[g(m(s.detail.realname),1)])),_:1}),_(i,{class:"text-gray"},{default:r((()=>[g(m(s.detail.account),1)])),_:1})])),_:1})])),_:1}),_(i,{class:"cu-list menu"},{default:r((()=>[2==s.globalConfig.sysInfo.runMode&&s.detail.friend&&s.userInfo.user_id!=s.detail.user_id?(d(),u(i,{key:0,class:"cu-item",onClick:n.setNickname},{default:r((()=>[_(i,{class:"content"},{default:r((()=>[_(o,{class:"cuIcon-edit text-green"}),_(o,null,{default:r((()=>[g(m(t.$t("contact.remarks")),1)])),_:1})])),_:1}),_(i,{class:"action"},{default:r((()=>[_(o,{class:"text-grey text-sm"},{default:r((()=>[g(m(s.detail.friend.nickname||t.$t("contact.no_set")),1)])),_:1}),_(o,{class:"text-grey text-sm ml-5 cuIcon-write"})])),_:1})])),_:1},8,["onClick"])):h("",!0),_(i,{class:"cu-item"},{default:r((()=>[_(i,{class:"content"},{default:r((()=>[_(o,{class:"cuIcon-mail text-green"}),_(o,null,{default:r((()=>[g(m(t.$t("contact.emial")),1)])),_:1})])),_:1}),_(i,{class:"action"},{default:r((()=>[_(o,{class:"text-grey text-sm"},{default:r((()=>[g(m(s.detail.email??""),1)])),_:1})])),_:1})])),_:1}),_(i,{class:"cu-item"},{default:r((()=>[_(i,{class:"content"},{default:r((()=>[_(o,{class:"cuIcon-safe text-green"}),_(o,null,{default:r((()=>[g(m(t.$t("contact.sex")),1)])),_:1})])),_:1}),_(i,{class:"action"},{default:r((()=>[_(o,{class:"text-grey text-sm"},{default:r((()=>[g(m(n.sex(s.detail.sex)),1)])),_:1})])),_:1})])),_:1}),parseInt(s.globalConfig.sysInfo.ipregion)?(d(),u(i,{key:1,class:"cu-item"},{default:r((()=>[_(i,{class:"content"},{default:r((()=>[_(o,{class:"cuIcon-location text-green"}),_(o,null,{default:r((()=>[g("IP")])),_:1})])),_:1}),_(i,{class:"action"},{default:r((()=>[s.detail.last_login_ip?(d(),u(o,{key:0,class:"text-grey text-sm"},{default:r((()=>[g(m(s.detail.last_login_ip||t.$t("contact.no_msg"))+" （"+m(s.detail.location||t.$t("contact.no_msg"))+"）",1)])),_:1})):(d(),u(o,{key:1,class:"text-grey text-sm"},{default:r((()=>[g("未知")])),_:1}))])),_:1})])),_:1})):h("",!0)])),_:1}),s.userInfo.user_id!=s.detail.user_id?(d(),k(x,{key:0},[1==s.globalConfig.sysInfo.runMode||s.detail.friend?(d(),u(i,{key:0,class:"padding flex flex-direction"},{default:r((()=>[_(N,{class:"cu-btn bg-green mt-10 lg",onClick:e[0]||(e[0]=t=>n.sendMsg(s.detail))},{default:r((()=>[g(m(t.$t("contact.send_msg")),1)])),_:1}),n.validatePhone?(d(),u(N,{key:0,class:"cu-btn bg-blue mt-10 lg",onClick:e[1]||(e[1]=t=>n.callPhone())},{default:r((()=>[g(m(t.$t("contact.call")),1)])),_:1})):h("",!0),parseInt(s.globalConfig.chatInfo.webrtc)?(d(),u(N,{key:1,class:"cu-btn bg-grey mt-10 lg",onClick:e[2]||(e[2]=t=>s.modelName="callRtc")},{default:r((()=>[g(m(t.$t("contact.video")),1)])),_:1})):h("",!0),2==s.globalConfig.sysInfo.runMode?(d(),u(N,{key:2,class:"cu-btn bg-red mt-10 lg",onClick:e[3]||(e[3]=t=>n.delFriend())},{default:r((()=>[g(m(t.$t("contact.del_friend")),1)])),_:1})):h("",!0)])),_:1})):h("",!0),2!=s.globalConfig.sysInfo.runMode||s.detail.friend?h("",!0):(d(),u(i,{key:1,class:"padding flex flex-direction"},{default:r((()=>[_(N,{class:"cu-btn bg-green lg",onClick:e[4]||(e[4]=t=>n.addFriend())},{default:r((()=>[g(m(t.$t("contact.add_friend")),1)])),_:1})])),_:1}))],64)):h("",!0),_(i,{class:b(["cu-modal bottom-modal","callRtc"==s.modelName?"show":""]),onClick:e[8]||(e[8]=t=>s.modelName="")},{default:r((()=>[_(i,{class:"cu-dialog"},{default:r((()=>[_(i,{class:"manage-content"},{default:r((()=>[_(i,{class:"cu-list menu bg-white"},{default:r((()=>[_(i,{class:"cu-item",onClick:e[5]||(e[5]=t=>n.calling(0))},{default:r((()=>[_(i,{class:"content padding-tb-sm"},{default:r((()=>[_(o,{class:"cuIcon-dianhua"}),_(o,null,{default:r((()=>[g(m(t.$t("contact.video_yuyin")),1)])),_:1})])),_:1})])),_:1}),_(i,{class:"cu-item",onClick:e[6]||(e[6]=t=>n.calling(1))},{default:r((()=>[_(i,{class:"content padding-tb-sm"},{default:r((()=>[_(o,{class:"cuIcon-record"}),_(o,null,{default:r((()=>[g(m(t.$t("contact.video_shiping")),1)])),_:1})])),_:1})])),_:1}),_(i,{class:"parting-line-5"}),_(i,{class:"cu-item",onClick:e[7]||(e[7]=t=>s.modelName="")},{default:r((()=>[_(i,{class:"content padding-tb-sm"},{default:r((()=>[_(o,{class:"c-red"},{default:r((()=>[g(m(t.$t("contact.close")),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["class"]),$(_(i,null,{default:r((()=>[_(i,{class:"com_bg"}),_(i,{class:"com_main"},{default:r((()=>[_(i,{class:"pop_mian"},{default:r((()=>[_(i,{class:"pop_title"},{default:r((()=>[g(m(t.$t("pop.title")),1)])),_:1}),_(i,{style:{padding:"10px 15px","line-height":"25px","flex-wrap":"wrap","text-align":"center"}},{default:r((()=>[g(m(t.$t("pop.content7")),1)])),_:1}),_(i,{class:"pop_foot"},{default:r((()=>[_(i,{class:"pop_ft_btn1",onClick:e[9]||(e[9]=e=>t.pop_notice=!1)},{default:r((()=>[g(m(t.$t("pop.close")),1)])),_:1}),_(i,{class:"pop_ft_btn2",onClick:e[10]||(e[10]=e=>t.pop_ok())},{default:r((()=>[g(m(t.$t("pop.up")),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},512),[[y,t.pop_notice]])])),_:1})}]]);export{F as default};
