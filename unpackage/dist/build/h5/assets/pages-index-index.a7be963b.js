import{_ as a,u as t,s,a as e,b as n,h as i,$ as o,g as c,p as l,c as r,n as m,d as u,o as d,e as h,w as f,i as g,f as _,j as p,t as b,k as v,r as $,F as C,l as k,v as y,m as j,q as x,x as w,y as N,z as P}from"./index-7b243064.js";import{m as L}from"./index.faf62845.js";import T from"./pages-contacts-index.e070cee2.js";import I from"./pages-compass-index.066161b0.js";import S from"./pages-movie-index-index.580918ec.js";import F from"./pages-opengroup-opengroup.0b8fe03c.js";import M from"./pages-movie-bet-bet.e4c1d2f6.js";import q from"./pages-nearby-nearby.9b74ab21.js";import z from"./pages-mine-index.87e1a868.js";import{s as G}from"./scan.818e529d.js";import"./mp-html.5850ce47.js";import"./uni-app.es.718d5945.js";import"./emoji.4b4cb326.js";import"./status.684ef06d.js";import"./uni-icons.86065f3e.js";import"./nan_b.1f2ad1df.js";import"./common.b05f9007.js";const Q=t(s),U=e(s),{unread:A,sysUnread:B}=n(Q);const H=a({components:{message:L,contacts:T,compass:I,mine:z,movice:S,opengroup:F,bet:M,nearby:q},watch:{},data(){return this.$t("nav.home"),this.$t("nav.message"),this.$t("nav.serve"),this.$t("nav.contacts"),this.$t("nav.mine"),this.$t("nav.contacts"),this.$t("nav.mine"),{globalConfig:U.globalConfig,PageCur:"home",PageName:this.$t("nav.home"),TabCur:0,modelName:!1,navList:[],userinfo:{},tabs:0,run_fun:!0,tabs_arr:[]}},onShow(){this.PageName=this.$t("nav.home"),this.navList=[{name:"home",title:this.$t("nav.home"),notice:0},{name:"message",title:this.$t("nav.message"),notice:A},{name:"serve",title:this.$t("nav.serve"),notice:0},{name:"contacts",title:this.$t("nav.contacts"),notice:B},{name:"mine",title:this.$t("nav.mine"),notice:0}],this.tabs_arr=[{id:1,name:this.$t("tab_nav.nav1"),ifshow:!1},{id:2,name:this.$t("tab_nav.nav2"),ifshow:!1},{id:3,name:this.$t("tab_nav.nav3"),ifshow:!1},{id:4,name:this.$t("tab_nav.nav4"),ifshow:!1}]},onLoad(){},mounted(){this.$refs.child_action.get_banner(1),this.$refs.child_action.get_notice(2),this.$refs.child_action.getList(1,6,1),this.$refs.child_action.getList(2,10,2),i(),this.initContacts(),o("socketStatus",(a=>{a&&this.initContacts()})),this.userinfo=c("userInfo")},methods:{to_bottom(){setTimeout((()=>{l({scrollTop:document.querySelector(".scroll_main").scrollHeight-102,duration:0})}),100)},run_child(){""!==c("iffirst")&&(this.$refs.child_action.get_banner(1),this.$refs.child_action.getList(1,6,1),this.$refs.child_action.getList(2,10,2),r("iffirst",!0))},closeModel(){this.modelName=!1},scan(){G.scanQr()},NavChange:function(a){"mine"==a.name?m({url:"/pages/mine/index"}):"message"==a.name?m({url:"/pages/index/mv_index"}):"contacts"==a.name?u({url:"/pages/contacts/index"}):"compass"==a.name?m({url:"/pages/compass/index"}):"serve"==a.name?m({url:"/pages/movie/kefu/kefu"}):(this.PageCur=a.name,this.PageName=a.title)},showContacts(){1==this.TabCur?this.TabCur=0:this.TabCur=1},initContacts(){this.modelName="",this.$api.msgApi.initContacts().then((a=>{Q.sysUnread=a.count,Q.initContacts(a.data)}))},addGroup(){m({url:"/pages/index/userSelection?type=1"})},addFriend(){m({url:"/pages/contacts/search"})},search(){const a="message"==this.PageCur?1:2;m({url:"/pages/index/search?type="+a})},tab_change(a){this.tabs=a,this.PageName=this.tabs_arr[a].name,this.run_fun=!1,0==a&&(this.run_fun=!0,this.$refs.child_action.get_userinfo()),2==a&&this.$refs.bet_action.run_fun()}}},[["render",function(a,t,s,e,n,i){const o=w("cu-custom"),c=g,l=w("movice"),r=w("opengroup"),m=w("bet"),u=w("nearby"),L=P,T=N;return d(),h(c,{class:"scroll_main"},{default:f((()=>[_(o,{bgColor:"bg-gradual-pink",isBack:!1},{backText:f((()=>[])),content:f((()=>[p(b(n.PageName),1)])),_:1}),_(c,{class:"tab_mline"},{default:f((()=>[(d(!0),v(C,null,$(n.tabs_arr,((a,t)=>(d(),h(c,{class:x(["tab_mline_zi",{tab_hover:n.tabs==t}]),key:t,onClick:a=>i.tab_change(t)},{default:f((()=>[p(b(a.name),1)])),_:2},1032,["onClick","class"])))),128))])),_:1}),_(c,null,{default:f((()=>[k(_(l,{run:n.run_fun,ref:"child_action"},null,8,["run"]),[[y,0==n.tabs]]),1==n.tabs?(d(),h(r,{key:0})):j("",!0),k(_(m,{ref:"bet_action"},null,512),[[y,2==n.tabs]]),3==n.tabs?(d(),h(u,{key:1,onTo_bottom:i.to_bottom},null,8,["onTo_bottom"])):j("",!0)])),_:1}),3!=n.tabs?(d(),h(c,{key:0,class:"cu-bar tabbar bg-white shadow foot"},{default:f((()=>[(d(!0),v(C,null,$(n.navList,((a,t)=>(d(),h(c,{class:"action",onClick:t=>i.NavChange(a),key:t,"data-cur":"message"},{default:f((()=>[_(c,{class:"cuIcon-cu-image"},{default:f((()=>[_(L,{src:"/static/image/tabbar/"+[a.name]+[n.PageCur==a.name?"-active":""]+".svg"},null,8,["src"]),a.notice>0?(d(),h(c,{key:0,class:"cu-tag badge"},{default:f((()=>[p(b(a.notice),1)])),_:2},1024)):j("",!0)])),_:2},1024),_(c,{class:x(n.PageCur==a.name?"text-mauve":"text-black")},{default:f((()=>[p(b(a.title),1)])),_:2},1032,["class"])])),_:2},1032,["onClick"])))),128))])),_:1})):j("",!0),_(c,{class:x(["cu-modal bottom-modal","add"==n.modelName?"show":""]),onClick:t[4]||(t[4]=a=>n.modelName="")},{default:f((()=>[_(c,{class:"cu-dialog"},{default:f((()=>[_(c,{class:"manage-content"},{default:f((()=>[_(c,{class:"cu-list menu bg-white"},{default:f((()=>[_(c,{class:"cu-item",onClick:t[0]||(t[0]=a=>{i.initContacts()})},{default:f((()=>[_(c,{class:"content padding-tb-sm"},{default:f((()=>[_(T,{class:"cuIcon-refresh"}),_(T,null,{default:f((()=>[p(b(a.$t("talk.reload")),1)])),_:1})])),_:1})])),_:1}),void 0!==n.userinfo.role&&1==n.userinfo.role?(d(),h(c,{key:0},{default:f((()=>[2==n.globalConfig.sysInfo.runMode?(d(),h(c,{key:0,class:"cu-item",onClick:t[1]||(t[1]=a=>i.addFriend())},{default:f((()=>[_(c,{class:"content padding-tb-sm"},{default:f((()=>[_(T,{class:"cuIcon-friendadd"}),_(T,null,{default:f((()=>[p(b(a.$t("talk.add_friend")),1)])),_:1})])),_:1})])),_:1})):j("",!0),_(c,{class:"cu-item",onClick:t[2]||(t[2]=a=>i.addGroup())},{default:f((()=>[_(c,{class:"content padding-tb-sm"},{default:f((()=>[_(T,{class:"cuIcon-friend"}),_(T,null,{default:f((()=>[p(b(a.$t("talk.new_group")),1)])),_:1})])),_:1})])),_:1})])),_:1})):j("",!0),_(c,{class:"parting-line-5"}),_(c,{class:"cu-item",onClick:t[3]||(t[3]=a=>n.modelName="")},{default:f((()=>[_(c,{class:"content padding-tb-sm"},{default:f((()=>[_(T,{class:"c-red"},{default:f((()=>[p(b(a.$t("talk.close")),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["class"])])),_:1})}],["__scopeId","data-v-776de7b6"]]);export{H as default};
