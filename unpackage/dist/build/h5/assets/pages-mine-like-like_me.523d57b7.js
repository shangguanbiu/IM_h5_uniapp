import{_ as t,a as e,s as a,n as s,g as l,K as i,o,e as d,w as n,i as r,f as _,j as c,t as h,k as u,r as p,F as f,l as k,v as m,m as y,x,z as g,P as w,Q as b}from"./index-d492f317.js";import{_ as $,a as v,b as U}from"./men2.a2cf875e.js";import{_ as I,a as S}from"./nan.89d00671.js";import{_ as C,a as F}from"./nan_b.1f2ad1df.js";const A=e(a);const M=t({data(){return{pop_notice:!1,notice_type:1,notice_content:this.$t("pop.content4"),paddingB:0,total:0,params:{page:1,limit:10,is_mine:0,agent_id:""},list:[],iflike:!1,had_likes:[],show_talk:!1,talk_data:{},fromUserid:"",fromUser:"",send_content:"",host:""}},methods:{bet_talk(t){this.show_talk=!0,this.talk_data=t},pop_ok(){s({url:"/pages/movie/kefu/kefu"})},randomArray(t){let e=Array.from(t);if(0===t.length)return[];for(let a=e.length-1;a>0;a--){const t=Math.floor(Math.random()*(a+1));[e[a],e[t]]=[e[t],e[a]]}return e},getList(){this.$api.third_openApi.like_me_index(this.params).then((t=>{if(0==t.code){let e=t.data.data;this.total=t.count,e.forEach((t=>{this.$set(t,"iflike",!1),this.$set(t,"isfar",(1.5*Math.random()+1).toFixed(2)),this.$set(t,"ifonline",Math.random()>=.5),this.$set(t,"istime",(.5*Math.random()+1).toFixed(2)),this.had_likes.forEach((e=>{t.account==e&&(t.iflike=!0)}))})),this.fromUser.islevel<22?this.list=this.randomArray(e.slice(0,5)):this.list=this.randomArray(e)}}))},setLike(t,e,a){var s={type:t,user_id:l("userInfo").user_id,user_account:e};1==t&&this.$api.third_openApi.near_user_like(s).then((t=>{0==t.code&&(this.list[a].iflike=!0)}))},async check_if_friend(t){if(0==this.fromUser.istalk&&0==this.fromUser.role)return this.pop_notice=!0,void(this.notice_type=1);var e=new Array;e.push(this.fromUser.user_id),e.push(t);200==(await this.$myRuquest({url:"/api/front/index/saveImUser",method:"POST",data:{users:e.toString()}})).code&&this.sendMessage(t)},sendMessage(t){let e={id:this.$util.getUuid(),is_group:0,fromUser:this.fromUser,type:"text",toContactId:t,content:this.send_content,sendTime:(new Date).getTime()};this.$api.msgApi.sendMessage(e).then((t=>{0==t.code?(this.show_talk=!1,this.notice_content=this.$t("pop.content6"),this.pop_notice=!0,this.notice_type=2,this.count_number(),this.add_talk()):i({title:t.msg,icon:"none"})})).catch((t=>{}))},add_talk(){let t={agent_id:this.fromUser.agent_id,remark:"玩家:"+this.fromUser.account+",向附近的人："+this.talk_data.account+"打招呼了"};this.$api.third_openApi.add_talk(t).then((t=>{t.code})).catch((t=>{}))},async count_number(){let t=JSON.parse(JSON.stringify(A.userInfo));200==(await this.$myRuquest({url:"/api/front/index/changeImUserData",method:"POST",data:{user_id:t.user_id,column:"istalk"}})).code&&this.get_userinfo()},async get_userinfo(){let t=JSON.parse(JSON.stringify(A.userInfo));const e=await this.$myRuquest({url:"/api/front/index/getImUserInfo",method:"POST",data:{user_id:t.user_id}});if(200==e.code){this.fromUser=e.data;let t=JSON.parse(JSON.stringify(e.data));A.login(t)}}},created(){this.paddingB=this.inlineTools;var t=l("userInfo");1!==t.role&&(this.params.agent_id=t.agent_id),this.getList(),this.had_likes=t.islikes.split(","),this.fromUser=l("userInfo"),this.host=this.$imgurl()}},[["render",function(t,e,a,s,l,i){const A=x("cu-custom"),M=g,O=r,P=x("Empty"),T=w,V=b;return o(),d(O,null,{default:n((()=>[_(A,{bgColor:"bg-gradual-pink",isBack:!0},{backText:n((()=>[])),content:n((()=>[c(h(t.$t("like.title2")),1)])),_:1}),0!==l.list.length?(o(),d(O,{key:0},{default:n((()=>[(o(!0),u(f,null,p(l.list,((e,a)=>k((o(),d(O,{class:"user_line",key:a},{default:n((()=>[_(O,{class:"user_l"},{default:n((()=>[null!==e.avatar?(o(),d(M,{key:0,src:l.host+e.avatar,style:{width:"80px",height:"80px","border-radius":"50%"}},null,8,["src"])):y("",!0),null==e.avatar&&0==e.sex?(o(),d(M,{key:1,src:$,style:{width:"80px",height:"80px","border-radius":"50%"}})):y("",!0),null==e.avatar&&1==e.sex?(o(),d(M,{key:2,src:v,style:{width:"80px",height:"80px","border-radius":"50%"}})):y("",!0),null==e.avatar&&2==e.sex?(o(),d(M,{key:3,src:U,style:{width:"80px",height:"80px","border-radius":"50%"}})):y("",!0),_(O,{class:"item_like"},{default:n((()=>[e.ifonline?(o(),d(O,{key:0,class:"cuIcon-title",onClick:t=>i.setLike(2,e.account,a)},null,8,["onClick"])):y("",!0)])),_:2},1024)])),_:2},1024),_(O,{class:"user_r"},{default:n((()=>[_(O,{class:"item_name"},{default:n((()=>[_(O,{style:{display:"flex"}},{default:n((()=>[0==e.sex?(o(),d(O,{key:0,class:"sex_ico"},{default:n((()=>[_(M,{src:I,style:{width:"100%"},mode:"widthFix"})])),_:1})):y("",!0),1==e.sex?(o(),d(O,{key:1,class:"sex_ico"},{default:n((()=>[_(M,{src:S,style:{width:"100%"},mode:"widthFix"})])),_:1})):y("",!0),c(" "+h(e.realname),1)])),_:2},1024),_(O,{class:"col_96",style:{display:"flex",width:"150px","justify-content":"flex-end"}},{default:n((()=>[_(O,null,{default:n((()=>[c(h(e.isfar)+"km · ",1)])),_:2},1024),e.ifonline?(o(),d(O,{key:0},{default:n((()=>[c(h(t.$t("like.like_msg_1")),1)])),_:1})):y("",!0),e.ifonline?y("",!0):(o(),d(O,{key:1},{default:n((()=>[c(h(e.istime+t.$t("like.like_msg_2")),1)])),_:2},1024))])),_:2},1024)])),_:2},1024),_(O,{style:{margin:"5px 0","text-align":"right"}},{default:n((()=>[_(O,{class:"item_btn",onClick:t=>i.bet_talk(e)},{default:n((()=>[c(h(t.$t("like.talk")),1)])),_:2},1032,["onClick"])])),_:2},1024),""!==e.motto&&null!==e.motto?(o(),d(O,{key:0,class:"motto"},{default:n((()=>[c(h(t.$t("like.sine"))+"："+h(e.motto),1)])),_:2},1024)):y("",!0)])),_:2},1024)])),_:2},1024)),[[m,a<4]]))),128))])),_:1})):(o(),d(P,{key:1,noDatatext:t.$t("like.no_data"),textcolor:"#999"},null,8,["noDatatext"])),k(_(O,null,{default:n((()=>[_(O,{class:"com_bg",onClick:e[0]||(e[0]=t=>l.show_talk=!1)}),_(O,{class:"talk_mian"},{default:n((()=>[_(O,{style:{width:"90%",margin:"auto"}},{default:n((()=>[_(O,{class:"talk_ico"},{default:n((()=>[null!==l.talk_data.avatar?(o(),d(M,{key:0,src:l.talk_data.avatar,style:{width:"100%","border-radius":"50%",height:"80px"},mode:"widthFix"},null,8,["src"])):y("",!0),null==l.talk_data.avatar&&0==l.talk_data.sex?(o(),d(M,{key:1,src:$,sstyle:"width: 100%;border-radius: 50%; height: 80px;",mode:"widthFix"})):y("",!0),null==l.talk_data.avatar&&1==l.talk_data.sex?(o(),d(M,{key:2,src:v,style:{width:"100%","border-radius":"50%",height:"80px"},mode:"widthFix"})):y("",!0),null==l.talk_data.avatar&&2==l.talk_data.sex?(o(),d(M,{key:3,src:U,style:{width:"100%","border-radius":"50%",height:"80px"},mode:"widthFix"})):y("",!0)])),_:1}),_(O,{class:"talk_name"},{default:n((()=>[c(h(l.talk_data.realname),1)])),_:1}),_(O,{class:"talk_desc"},{default:n((()=>[0==l.talk_data.sex?(o(),d(O,{key:0,class:"talk_sex p_type1"},{default:n((()=>[_(O,{class:"sex_ico"},{default:n((()=>[_(M,{src:C,style:{width:"100%"},mode:"widthFix"})])),_:1}),_(O,{style:{"line-height":"25px"}},{default:n((()=>[c(h(l.talk_data.ages),1)])),_:1})])),_:1})):y("",!0),1==l.talk_data.sex?(o(),d(O,{key:1,class:"talk_sex p_type1"},{default:n((()=>[_(O,{class:"sex_ico"},{default:n((()=>[_(M,{src:F,style:{width:"100%"},mode:"widthFix"})])),_:1}),_(O,{style:{"line-height":"25px"}},{default:n((()=>[c(h(l.talk_data.ages),1)])),_:1})])),_:1})):y("",!0),2==l.talk_data.sex?(o(),d(O,{key:2,class:"talk_sex p_type3"},{default:n((()=>[_(O,{style:{"line-height":"25px"}},{default:n((()=>[c(h(l.talk_data.ages),1)])),_:1})])),_:1})):y("",!0),0!==l.talk_data.islevel?(o(),d(O,{key:3,class:"talk_sex p_type3"},{default:n((()=>[21==l.talk_data.islevel?(o(),d(O,{key:0,style:{"font-weight":"normal"}},{default:n((()=>[c("VIP")])),_:1})):y("",!0),22==l.talk_data.islevel?(o(),d(O,{key:1,style:{"font-weight":"normal"}},{default:n((()=>[c("Super VIP")])),_:1})):y("",!0),23==l.talk_data.islevel?(o(),d(O,{key:2,style:{"font-weight":"normal"}},{default:n((()=>[c("MVP VIP")])),_:1})):y("",!0)])),_:1})):y("",!0)])),_:1}),_(O,{class:"talk_form"},{default:n((()=>[_(O,{style:{"padding-left":"10px"}},{default:n((()=>[_(T,{placeholder:t.$t("like.talk_desc_1"),style:{height:"32px","font-size":"14px"},maxlength:"32",name:"input",modelValue:l.send_content,"onUpdate:modelValue":e[1]||(e[1]=t=>l.send_content=t)},null,8,["placeholder","modelValue"])])),_:1}),_(O,null,{default:n((()=>[_(V,{class:"cu-btn bg-blue shadow",onClick:e[2]||(e[2]=t=>i.check_if_friend(l.talk_data.user_id))},{default:n((()=>[c(h(t.$t("like.send")),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},512),[[m,l.show_talk]]),k(_(O,null,{default:n((()=>[_(O,{class:"com_bg"}),_(O,{class:"com_main"},{default:n((()=>[_(O,{class:"pop_mian"},{default:n((()=>[_(O,{class:"pop_title"},{default:n((()=>[c(h(t.$t("pop.title")),1)])),_:1}),_(O,{style:{padding:"10px 15px","line-height":"25px","flex-wrap":"wrap","text-align":"center"}},{default:n((()=>[c(h(l.notice_content),1)])),_:1}),_(O,{class:"pop_foot"},{default:n((()=>[1==l.notice_type?(o(),d(O,{key:0,class:"pop_ft_btn1",onClick:e[3]||(e[3]=t=>l.pop_notice=!1)},{default:n((()=>[c(h(t.$t("pop.close")),1)])),_:1})):y("",!0),1==l.notice_type?(o(),d(O,{key:1,class:"pop_ft_btn2",onClick:e[4]||(e[4]=t=>i.pop_ok())},{default:n((()=>[c(h(t.$t("pop.up")),1)])),_:1})):y("",!0),2==l.notice_type?(o(),d(O,{key:2,class:"pop_ft_btn2",onClick:e[5]||(e[5]=t=>l.pop_notice=!1)},{default:n((()=>[c(h(t.$t("pop.ok")),1)])),_:1})):y("",!0)])),_:1})])),_:1})])),_:1})])),_:1},512),[[m,l.pop_notice]])])),_:1})}],["__scopeId","data-v-8b8d32ef"]]);export{M as default};
