import{_ as t,a as e,s,n as i,c as a,aE as o,aF as l,a9 as n,g as _,aG as p,o as d,e as r,w as c,i as u,f as h,j as f,t as g,k as m,r as y,F as k,l as x,v as w,p as v,q as C,y as S}from"./index-bb9aa3b8.js";const T=e(s);const b=t({data:()=>({pop_notice:!1,active:0,top_title:"影院",show_more:!1,loadingType:0,page:1,State:0,type_list:[],timer:{},list:[],type_list:[],State:"",index_get:99,fromUser:""}),methods:{pop_ok(){i({url:"/pages/movie/kefu/kefu"})},jump(t){1==t?i({url:"/pages/movie/index/index"}):2==t?i({url:"/pages/movie/list/index"}):3==t?i({url:"/pages/movie/bet/bet"}):4==t?i({url:"/pages/kefu/kefu_index"}):5==t&&i({url:"/pages/mine/index"})},see_detail(t){0!=this.fromUser.isview?(a("movice_info",t),i({url:"/pages/movie/list/detial?id="+t.id})):this.pop_notice=!0},async get_type_list(){const t=await this.$myRuquest({url:"/api/front/movie/getTypes",method:"POST",data:{page:1}});200==t.code&&(this.type_list=t.data.data)},onClose(){},onChange(t){},openMore(){this.show_more=!this.show_more},get_type(t,e){this.page=1,this.index_get=e,this.openMore(),""!==t?(this.State=t.id,this.top_title="影院-"+t.name):(this.State="",this.top_title="影院"),this.getList()},async get_userinfo(){let t=JSON.parse(JSON.stringify(T.userInfo));const e=await this.$myRuquest({url:"/api/front/index/getImUserInfo",method:"POST",data:{user_id:t.user_id}});if(200==e.code){this.fromUser=e.data;let t=JSON.parse(JSON.stringify(e.data));T.login(t)}},async getList(t){this.list=[];const e=await this.$myRuquest({method:"Post",url:"/api/front/movie/getMoreList",data:{page:this.page,pagesize:10,type_id:this.State}});200==e.code&&(this.list=e.data.list),t&&t()},async getmorelists(){if(0!==this.loadingType)return!1;this.loadingType=1,o(),this.page++;const t=await this.$myRuquest({method:"Post",url:"/api/front/movie/getMoreList",data:{page:this.page,pagesize:10,type_id:this.State}});if(200==t.code){if(t.data.list.length<1)return this.loadingType=2,void l();this.list=this.list.concat(t.data.list),this.loadingType=0,l()}}},mounted(){},onLoad(t){this.get_type_list(),this.getList(),n("movice_info"),this.show_more=!1;var e=document.getElementsByClassName("uni-page-head-hd")[0];e&&(e.style.display="none")},onShow(){this.get_userinfo(),this.fromUser=_("userInfo"),window.scrollTo({top:0,behavior:"smooth"}),this.show_login=!1,_("token")},onPullDownRefresh(){this.page=1,this.list=[],this.getList().then((t=>p()))},onReachBottom(){null!==this.timer&&clearTimeout(this.timer),this.timer=setTimeout((()=>{this.getmorelists()}),1e3)}},[["render",function(t,e,s,i,a,o){const l=u,n=C("cu-custom"),_=S,p=C("Empty");return d(),r(l,null,{default:c((()=>[h(n,{bgColor:"bg-gradual-pink",isBack:!0},{content:c((()=>[f(g(a.top_title),1)])),right:c((()=>[h(l,{class:"cuIcon-more mr-10 f-16",onClick:o.openMore},null,8,["onClick"])])),_:1}),0!==a.list.length?(d(),r(l,{key:0,class:"list_are"},{default:c((()=>[(d(!0),m(k,null,y(a.list,((t,e)=>(d(),r(l,{class:"list_item",key:e,onClick:e=>o.see_detail(t)},{default:c((()=>[h(l,{class:"list_zi"},{default:c((()=>[h(l,{class:"list_img_are"},{default:c((()=>[h(_,{src:t.img,class:"list_zi_img",mode:"widthFix"},null,8,["src"])])),_:2},1024),h(l,{class:"list_foot"},{default:c((()=>[h(l,{class:"m_title"},{default:c((()=>[f(g(t.name),1)])),_:2},1024),h(l,{style:{display:"flex"}},{default:c((()=>[h(l,{class:"cuIcon-cardboardfill l_ft_r",style:{"font-size":"14px"}}),h(l,{class:"l_ft_r"},{default:c((()=>[f(g(t.view_count),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})):(d(),r(p,{key:1,noDatatext:"暂无记录",textcolor:"#999"})),x(h(l,{class:"type_more"},{default:c((()=>[h(l,{style:{"padding-top":"50px"}},{default:c((()=>[h(l,{class:"type_tit"},{default:c((()=>[f("热门分类")])),_:1}),h(l,{class:v(["type_zi",{type_get:99==a.index_get}]),onClick:e[0]||(e[0]=t=>o.get_type("",99))},{default:c((()=>[f(" 全部 ")])),_:1},8,["class"]),(d(!0),m(k,null,y(a.type_list,((t,e)=>(d(),r(l,{class:v(["type_zi",{type_get:a.index_get==e}]),key:e,onClick:s=>o.get_type(t,e)},{default:c((()=>[f(g(t.name),1)])),_:2},1032,["class","onClick"])))),128))])),_:1}),h(l,{class:"type_close",onClick:e[1]||(e[1]=t=>a.show_more=!1)},{default:c((()=>[f("关闭")])),_:1})])),_:1},512),[[w,a.show_more]]),x(h(l,null,{default:c((()=>[h(l,{class:"com_bg"}),h(l,{class:"com_main"},{default:c((()=>[h(l,{class:"pop_mian"},{default:c((()=>[h(l,{class:"pop_title"},{default:c((()=>[f("提示")])),_:1}),h(l,{style:{padding:"10px 15px",display:"flex","justify-content":"flex-start","line-height":"25px","flex-wrap":"wrap"}},{default:c((()=>[f(" 您当前可观看浏览视频数量已达到每日限制，观看更多可开通会员，请联系客服 ")])),_:1}),h(l,{class:"pop_foot"},{default:c((()=>[h(l,{class:"pop_ft_btn1",onClick:e[2]||(e[2]=t=>a.pop_notice=!1)},{default:c((()=>[f("关闭")])),_:1}),h(l,{class:"pop_ft_btn2",onClick:e[3]||(e[3]=t=>o.pop_ok())},{default:c((()=>[f("去升级")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},512),[[w,a.pop_notice]])])),_:1})}],["__scopeId","data-v-cc74e44a"]]);export{b as default};
