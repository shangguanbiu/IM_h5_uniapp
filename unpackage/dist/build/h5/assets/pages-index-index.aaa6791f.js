import{_ as a,u as e,s,a as t,b as n,h as i,$ as o,g as c,c as l,n as r,d as m,o as d,e as u,w as f,i as g,f as p,j as h,t as _,k as b,r as C,F as k,l as v,m as x,v as y,p as j,q as N,x as w,y as P}from"./index-cd0ab6d8.js";import{m as $}from"./index.befeee05.js";import I from"./pages-contacts-index.6f947b59.js";import L from"./pages-compass-index.540656e5.js";import T from"./pages-movie-index-index.7bfe6b2d.js";import F from"./pages-opengroup-opengroup.02e236d9.js";import M from"./pages-movie-bet-bet.e671c7bb.js";import S from"./pages-nearby-nearby.4ff55e3c.js";import G from"./pages-mine-index.18173e13.js";import{s as U}from"./scan.1a6c8fa6.js";import"./mp-html.40725cf4.js";import"./uni-app.es.224f57fe.js";import"./emoji.4b4cb326.js";import"./status.bacbd1e6.js";import"./uni-icons.1d7bf950.js";import"./common.5a281662.js";const q=e(s),z=t(s),{unread:A,sysUnread:B}=n(q);const H=a({components:{message:$,contacts:I,compass:L,mine:G,movice:T,opengroup:F,bet:M,nearby:S},data:()=>({globalConfig:z.globalConfig,PageCur:"home",PageName:"首页",TabCur:0,modelName:!1,navList:[{name:"home",title:"首页",notice:0},{name:"message",title:"消息",notice:A},{name:"serve",title:"客服",notice:0},{name:"contacts",title:"通讯录",notice:B},{name:"mine",title:"我的",notice:0}],userinfo:{},tabs:0,tabs_arr:[{id:1,name:"影院",ifshow:!1},{id:2,name:"福利群",ifshow:!1},{id:3,name:"投票",ifshow:!1},{id:4,name:"附近的人",ifshow:!1}]}),onShow(){this.run_child()},onLoad(){},mounted(){this.$refs.child_action.get_banner(1),this.$refs.child_action.get_notice(2),this.$refs.child_action.getList(1,6,1),this.$refs.child_action.getList(2,10,2),i(),this.initContacts(),o("socketStatus",(a=>{a&&this.initContacts()})),this.userinfo=c("userInfo")},methods:{run_child(){0==c("iffirst")&&""!==c("iffirst")&&(this.$refs.child_action.getList(1,6,1),this.$refs.child_action.getList(2,10,2),l("iffirst",!0))},closeModel(){this.modelName=!1},scan(){U.scanQr()},NavChange:function(a){"mine"==a.name?r({url:"/pages/mine/index"}):"message"==a.name?r({url:"/pages/index/mv_index"}):"contacts"==a.name?m({url:"/pages/contacts/index"}):"compass"==a.name?r({url:"/pages/compass/index"}):"serve"==a.name?r({url:"/pages/movie/kefu/kefu"}):(this.PageCur=a.name,this.PageName=a.title)},showContacts(){1==this.TabCur?this.TabCur=0:this.TabCur=1},initContacts(){this.modelName="",this.$api.msgApi.initContacts().then((a=>{q.sysUnread=a.count,q.initContacts(a.data)}))},addGroup(){r({url:"/pages/index/userSelection?type=1"})},addFriend(){r({url:"/pages/contacts/search"})},search(){const a="message"==this.PageCur?1:2;r({url:"/pages/index/search?type="+a})},tab_change(a){this.tabs=a,this.PageName=this.tabs_arr[a].name,2==a&&this.$refs.bet_action.run_fun()}}},[["render",function(a,e,s,t,n,i){const o=N("cu-custom"),c=g,l=N("movice"),r=N("opengroup"),m=N("bet"),$=N("nearby"),I=P,L=w;return d(),u(c,null,{default:f((()=>[p(o,{bgColor:"bg-gradual-pink",isBack:!1},{backText:f((()=>[])),content:f((()=>[h(_(n.PageName),1)])),_:1}),p(c,{class:"tab_mline"},{default:f((()=>[(d(!0),b(k,null,C(n.tabs_arr,((a,e)=>(d(),u(c,{class:j(["tab_mline_zi",{tab_hover:n.tabs==e}]),key:e,onClick:a=>i.tab_change(e)},{default:f((()=>[h(_(a.name),1)])),_:2},1032,["onClick","class"])))),128))])),_:1}),p(c,null,{default:f((()=>[0==n.tabs?(d(),u(l,{key:0,ref:"child_action"},null,512)):v("",!0),1==n.tabs?(d(),u(r,{key:1})):v("",!0),x(p(m,{ref:"bet_action"},null,512),[[y,2==n.tabs]]),3==n.tabs?(d(),u($,{key:2})):v("",!0)])),_:1}),3!=n.tabs?(d(),u(c,{key:0,class:"cu-bar tabbar bg-white shadow foot"},{default:f((()=>[(d(!0),b(k,null,C(n.navList,((a,e)=>(d(),u(c,{class:"action",onClick:e=>i.NavChange(a),key:e,"data-cur":"message"},{default:f((()=>[p(c,{class:"cuIcon-cu-image"},{default:f((()=>[p(I,{src:"/static/image/tabbar/"+[a.name]+[n.PageCur==a.name?"-active":""]+".svg"},null,8,["src"]),a.notice>0?(d(),u(c,{key:0,class:"cu-tag badge"},{default:f((()=>[h(_(a.notice),1)])),_:2},1024)):v("",!0)])),_:2},1024),p(c,{class:j(n.PageCur==a.name?"text-mauve":"text-black")},{default:f((()=>[h(_(a.title),1)])),_:2},1032,["class"])])),_:2},1032,["onClick"])))),128))])),_:1})):v("",!0),p(c,{class:j(["cu-modal bottom-modal","add"==n.modelName?"show":""]),onClick:e[4]||(e[4]=a=>n.modelName="")},{default:f((()=>[p(c,{class:"cu-dialog"},{default:f((()=>[p(c,{class:"manage-content"},{default:f((()=>[p(c,{class:"cu-list menu bg-white"},{default:f((()=>[p(c,{class:"cu-item",onClick:e[0]||(e[0]=a=>{i.initContacts()})},{default:f((()=>[p(c,{class:"content padding-tb-sm"},{default:f((()=>[p(L,{class:"cuIcon-refresh"}),p(L,null,{default:f((()=>[h("更新消息列表")])),_:1})])),_:1})])),_:1}),void 0!==n.userinfo.role&&1==n.userinfo.role?(d(),u(c,{key:0},{default:f((()=>[2==n.globalConfig.sysInfo.runMode?(d(),u(c,{key:0,class:"cu-item",onClick:e[1]||(e[1]=a=>i.addFriend())},{default:f((()=>[p(c,{class:"content padding-tb-sm"},{default:f((()=>[p(L,{class:"cuIcon-friendadd"}),p(L,null,{default:f((()=>[h("添加朋友")])),_:1})])),_:1})])),_:1})):v("",!0),p(c,{class:"cu-item",onClick:e[2]||(e[2]=a=>i.addGroup())},{default:f((()=>[p(c,{class:"content padding-tb-sm"},{default:f((()=>[p(L,{class:"cuIcon-friend"}),p(L,null,{default:f((()=>[h("创建群聊")])),_:1})])),_:1})])),_:1})])),_:1})):v("",!0),p(c,{class:"parting-line-5"}),p(c,{class:"cu-item",onClick:e[3]||(e[3]=a=>n.modelName="")},{default:f((()=>[p(c,{class:"content padding-tb-sm"},{default:f((()=>[p(L,{class:"c-red"},{default:f((()=>[h("取消")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["class"])])),_:1})}],["__scopeId","data-v-4e369a1c"]]);export{H as default};
