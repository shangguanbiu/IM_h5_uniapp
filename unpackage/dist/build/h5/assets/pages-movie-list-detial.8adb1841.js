import{_ as t,a as e,s as a,n as i,g as s,c as l,o,e as n,w as r,i as d,f as u,j as c,t as _,k as p,r as f,F as g,l as m,v as h,x as w,a0 as y,q as k,z as x}from"./index-d492f317.js";const v=e(a);const b=t({data:()=>({top_title:"详情",pop_notice:!1,scrollW:0,show_login:!1,indicatorDots:!0,autoplay:!0,interval:3e3,duration:500,indicatorColor:"#292b40",indicatorActiveColor:"#ffffff",tag:["好看","大片","动作片","青春","喜剧"],detail:{},guess_arr:[],fromUser:""}),methods:{pop_ok(){i({url:"/pages/movie/kefu/kefu"})},randomArray(t){let e=Array.from(t);if(0===t.length)return[];for(let a=e.length-1;a>0;a--){const t=Math.floor(Math.random()*(a+1));[e[a],e[t]]=[e[t],e[a]]}return e},async getList(t){this.list=[];const e=await this.$myRuquest({method:"Post",url:"/api/front/movie/getList",data:{page:1,pagesize:6,tag:"",current_id:t}});200==e.code&&(this.guess_arr=this.randomArray(e.data.list))},async add_view(t){200==(await this.$myRuquest({method:"Post",url:"/api/front/movie/addViewCount",data:{id:t}})).code&&this.count_number("isview")},async count_number(t){let e=JSON.parse(JSON.stringify(v.userInfo));(await this.$myRuquest({url:"/api/front/index/changeImUserData",method:"POST",data:{user_id:e.user_id,column:t}})).code},jump(t){1==t?i({url:"/pages/index/index"}):2==t?i({url:"/pages/recharge/recharge"}):3==t?i({url:"/pages/kefu/kefu_index"}):4==t&&i({url:"/pages/usercenter/usercenter"})},onClose(){this.show_login=!this.show_login},noOk(){i({url:"/pages/login/login"})},to_notice(){i({url:"/pages/notice/notice"})},onNavigationBarButtonTap(t){""!==s("token")?0==t.index?i({url:"/pages/notice/notice"}):i({url:"/pages/login/login"}):this.show_login=!0},see_detail(t){0!=this.fromUser.isview||0!=this.fromUser.role?(l("movice_info",t),i({url:"/pages/movie/list/detial?id="+t.id})):this.pop_notice=!0},async get_userinfo(){let t=JSON.parse(JSON.stringify(v.userInfo));const e=await this.$myRuquest({url:"/api/front/index/getImUserInfo",method:"POST",data:{user_id:t.user_id}});if(200==e.code){this.fromUser=e.data;let t=JSON.parse(JSON.stringify(e.data));v.login(t)}}},onLoad(t){l("iffirst",!1),this.detail=s("movice_info"),this.top_title=this.detail.name,this.getList(t.id),this.add_view(t.id)},mounted(){window.scrollTo({top:0,behavior:"smooth"})},onShow(){window.scrollTo({top:0,behavior:"smooth"}),this.show_login=!1,s("token")}},[["render",function(t,e,a,i,s,l){const v=w("cu-custom"),b=y,$=d,C=x,O=w("van-icon");return o(),n($,null,{default:r((()=>[u(v,{bgColor:"bg-gradual-pink",isBack:!0},{backText:r((()=>[])),content:r((()=>[c(_(s.top_title),1)])),_:1}),u($,{class:"page-section swiper"},{default:r((()=>[u($,null,{default:r((()=>[u(b,{id:"myVideo",src:s.detail.url,onError:t.videoErrorCallback,width:"100%",height:"400px","enable-danmu":"","danmu-btn":"",controls:""},null,8,["src","onError"])])),_:1}),u($,{class:"main_i"},{default:r((()=>[u($,{class:"main_title"},{default:r((()=>[c(_(s.detail.name),1)])),_:1}),u($,{class:"mian_price_line",style:{padding:"7px 0"}},{default:r((()=>[u($,{class:"mark_price"},{default:r((()=>[c(_(t.$t("detail.view"))+"："+_(s.detail.view_count),1)])),_:1})])),_:1}),u($,{class:"main_title",style:{"margin-top":"10px",color:"#2a1468"}},{default:r((()=>[c(_(t.$t("detail.jianjie")),1)])),_:1}),u($,{class:"dangan"},{default:r((()=>[c(_(s.detail.desc),1)])),_:1}),u($,{style:{display:"flex",padding:"10px 0","flex-wrap":"wrap"}},{default:r((()=>[(o(!0),p(g,null,f(s.detail.hot_tags.split(","),((t,e)=>(o(),n($,{class:k("item_"+e),key:e},{default:r((()=>[c(_(t),1)])),_:2},1032,["class"])))),128))])),_:1}),u($,{class:"main_title",style:{"margin-top":"10px",color:"#2a1468"}},{default:r((()=>[c(_(t.$t("detail.belike")),1)])),_:1}),u($,{class:"like_are"},{default:r((()=>[(o(!0),p(g,null,f(s.guess_arr,((t,e)=>(o(),n($,{class:"like_zi",key:e,onClick:e=>l.see_detail(t)},{default:r((()=>[u($,{class:"like_zi_are"},{default:r((()=>[u(C,{src:t.img,class:"list_zi_img",mode:"widthFix"},null,8,["src"]),u($,{class:"like_zi_title"},{default:r((()=>[u($,null,{default:r((()=>[c(_(t.name),1)])),_:2},1024),u($,null,{default:r((()=>[u(O,{name:"eye-o",class:"l_ft_r"}),c(_(t.view_count),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})])),_:1}),m(u($,null,{default:r((()=>[u($,{class:"com_bg"}),u($,{class:"com_main"},{default:r((()=>[u($,{class:"pop_mian"},{default:r((()=>[u($,{class:"pop_title"},{default:r((()=>[c(_(t.$t("pop.title")),1)])),_:1}),u($,{style:{padding:"10px 15px",display:"flex","justify-content":"flex-start","line-height":"25px","flex-wrap":"wrap"}},{default:r((()=>[c(_(t.$t("pop.content2")),1)])),_:1}),u($,{class:"pop_foot"},{default:r((()=>[u($,{class:"pop_ft_btn1",onClick:e[0]||(e[0]=t=>s.pop_notice=!1)},{default:r((()=>[c(_(t.$t("pop.close")),1)])),_:1}),u($,{class:"pop_ft_btn2",onClick:e[1]||(e[1]=t=>l.pop_ok())},{default:r((()=>[c(_(t.$t("pop.up")),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},512),[[h,s.pop_notice]])])),_:1})}],["__scopeId","data-v-d550a020"]]);export{b as default};
