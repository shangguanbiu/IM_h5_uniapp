import{_ as a,u as s,s as e,a as t,b as n,h as o,g as c,$ as l,n as i,d,o as m,e as u,w as r,i as g,f,m as h,j as p,t as C,q as b,k as _,r as k,F as v,y as x,x as y,z as w}from"./index-d8cdb88b.js";import{m as I}from"./index.d13fe7aa.js";import j from"./pages-contacts-index.434d3136.js";import P from"./pages-compass-index.2a4a92db.js";import $ from"./pages-mine-index.d9281946.js";import{s as N}from"./scan.372aa36f.js";import"./mp-html.54f92f21.js";import"./uni-app.es.93d0707e.js";import"./emoji.4b4cb326.js";import"./status.4b591e55.js";const T=s(e),L=t(e),{unread:F,sysUnread:M}=n(T);const S=a({components:{message:I,contacts:j,compass:P,mine:$},data(){return{globalConfig:L.globalConfig,PageCur:"message",PageName:this.$t("nav.message"),TabCur:0,modelName:!1,navList:[],userinfo:{},tabs:0,tabs_arr:[{id:1,name:"影院",ifshow:!1},{id:2,name:"群",ifshow:!1},{id:3,name:"探索",ifshow:!1},{id:4,name:"附近的人",ifshow:!1}]}},onShow(){this.navList=[{name:"home",title:this.$t("nav.home"),notice:0},{name:"message",title:this.$t("nav.message"),notice:F},{name:"serve",title:this.$t("nav.serve"),notice:0},{name:"contacts",title:this.$t("nav.contacts"),notice:M},{name:"mine",title:this.$t("nav.mine"),notice:0}]},onLoad(){},mounted(){o(),c("allContacts").length||this.initContacts(),l("socketStatus",(a=>{a&&this.initContacts()})),this.userinfo=c("userInfo")},methods:{closeModel(){this.modelName=!1},scan(){N.scanQr()},NavChange:function(a){"mine"==a.name?i({url:"/pages/mine/index"}):"contacts"==a.name?d({url:"/pages/contacts/index"}):"compass"==a.name?i({url:"/pages/compass/index"}):"serve"==a.name?i({url:"/pages/movie/kefu/kefu"}):"home"==a.name&&d({url:"/pages/index/index"})},showContacts(){1==this.TabCur?this.TabCur=0:this.TabCur=1},initContacts(){this.modelName="",this.$api.msgApi.initContacts().then((a=>{T.sysUnread=a.count,T.initContacts(a.data)}))},addGroup(){i({url:"/pages/index/userSelection?type=1"})},addFriend(){i({url:"/pages/contacts/search"})},search(){const a="message"==this.PageCur?1:2;i({url:"/pages/index/search?type="+a})},tab_change(a){this.tabs=a}}},[["render",function(a,s,e,t,n,o){const c=x,l=g,i=y("cu-custom"),d=y("message"),I=y("contacts"),j=w;return m(),u(l,null,{default:r((()=>[f(i,{bgColor:"bg-white"},{backText:r((()=>["message"==n.PageCur||"contacts"==n.PageCur?(m(),u(l,{key:0,class:"f-20 ml-10 mr-10",onClick:s[0]||(s[0]=a=>o.search())},{default:r((()=>[f(c,{class:"cuIcon-search",style:{"margin-left":"-10px"}})])),_:1})):h("",!0)])),content:r((()=>[p(C(n.PageName),1)])),right:r((()=>["contacts"==n.PageCur&&n.globalConfig&&n.globalConfig.demon_mode?(m(),u(l,{key:0,class:"f-20 ml-10 mr-10",onClick:s[1]||(s[1]=a=>o.showContacts())},{default:r((()=>[f(c,{class:b(["f-24",n.TabCur?"cuIcon-peoplelist":"cuIcon-friend"])},null,8,["class"])])),_:1})):h("",!0),"message"==n.PageCur?(m(),u(l,{key:1,class:"f-20 ml-10 mr-10",onClick:s[2]||(s[2]=a=>n.modelName="add")},{default:r((()=>[f(c,{class:"cuIcon-add f-28"})])),_:1})):h("",!0)])),_:1}),f(l,null,{default:r((()=>["message"==n.PageCur?(m(),u(d,{key:0})):h("",!0),"contacts"==n.PageCur?(m(),u(I,{key:1,TabCur:n.TabCur},null,8,["TabCur"])):h("",!0)])),_:1}),(m(),u(l,{class:"cu-bar tabbar bg-white shadow foot",key:a.keyIndex},{default:r((()=>[(m(!0),_(v,null,k(n.navList,((a,s)=>(m(),u(l,{class:"action",onClick:s=>o.NavChange(a),"data-cur":"message"},{default:r((()=>[f(l,{class:"cuIcon-cu-image"},{default:r((()=>[f(j,{src:"/static/image/tabbar/"+[a.name]+[n.PageCur==a.name?"-active":""]+".svg"},null,8,["src"]),a.notice>0?(m(),u(l,{key:0,class:"cu-tag badge"},{default:r((()=>[p(C(a.notice),1)])),_:2},1024)):h("",!0)])),_:2},1024),f(l,{class:b(n.PageCur==a.name?"text-mauve":"text-black")},{default:r((()=>[p(C(a.title),1)])),_:2},1032,["class"])])),_:2},1032,["onClick"])))),256))])),_:1})),f(l,{class:b(["cu-modal bottom-modal","add"==n.modelName?"show":""]),onClick:s[7]||(s[7]=a=>n.modelName="")},{default:r((()=>[f(l,{class:"cu-dialog"},{default:r((()=>[f(l,{class:"manage-content"},{default:r((()=>[f(l,{class:"cu-list menu bg-white"},{default:r((()=>[f(l,{class:"cu-item",onClick:s[3]||(s[3]=a=>{o.initContacts()})},{default:r((()=>[f(l,{class:"content padding-tb-sm"},{default:r((()=>[f(c,{class:"cuIcon-refresh"}),f(c,null,{default:r((()=>[p(C(a.$t("talk.reload")),1)])),_:1})])),_:1})])),_:1}),void 0!==n.userinfo.role&&1==n.userinfo.role?(m(),u(l,{key:0},{default:r((()=>[2==n.globalConfig.sysInfo.runMode?(m(),u(l,{key:0,class:"cu-item",onClick:s[4]||(s[4]=a=>o.addFriend())},{default:r((()=>[f(l,{class:"content padding-tb-sm"},{default:r((()=>[f(c,{class:"cuIcon-friendadd"}),f(c,null,{default:r((()=>[p(C(a.$t("talk.add_friend")),1)])),_:1})])),_:1})])),_:1})):h("",!0),f(l,{class:"cu-item",onClick:s[5]||(s[5]=a=>o.addGroup())},{default:r((()=>[f(l,{class:"content padding-tb-sm"},{default:r((()=>[f(c,{class:"cuIcon-friend"}),f(c,null,{default:r((()=>[p(C(a.$t("talk.new_group")),1)])),_:1})])),_:1})])),_:1})])),_:1})):h("",!0),f(l,{class:"parting-line-5"}),f(l,{class:"cu-item",onClick:s[6]||(s[6]=a=>n.modelName="")},{default:r((()=>[f(l,{class:"content padding-tb-sm"},{default:r((()=>[f(c,{class:"c-red"},{default:r((()=>[p(C(a.$t("talk.close")),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["class"])])),_:1})}],["__scopeId","data-v-ebd5c565"]]);export{S as default};
