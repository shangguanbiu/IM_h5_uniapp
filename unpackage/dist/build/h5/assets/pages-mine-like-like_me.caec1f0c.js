import{_ as t,n as e,g as a,J as s,o as l,e as i,w as n,i as o,f as _,j as d,k as c,r as u,F as p,l as r,v as f,t as h,m as k,q as m,y,O as x,P as g}from"./index-7ddb419c.js";import{_ as w,a as b}from"./nan.89d00671.js";import{_ as v,a as C}from"./nan_b.1f2ad1df.js";const U=t({data:()=>({pop_notice:!1,notice_type:1,notice_content:"您当前可打招呼次数已达到每日限制，联更多的TA可开通会员，请联系客服",paddingB:0,total:0,params:{page:1,limit:10,is_mine:0},list:[],iflike:!1,had_likes:[],show_talk:!1,talk_data:{},fromUserid:"",fromUser:"",send_content:""}),methods:{bet_talk(t){this.show_talk=!0,this.talk_data=t},pop_ok(){e({url:"/pages/movie/kefu/kefu"})},getList(){this.$api.third_openApi.like_me_index(this.params).then((t=>{0==t.code&&(this.list=t.data.data,this.total=t.count,this.list.forEach((t=>{this.$set(t,"iflike",!1),this.$set(t,"isfar",(1.5*Math.random()+1).toFixed(2)),this.$set(t,"ifonline",Math.random()>=.5),this.$set(t,"istime",(.5*Math.random()+1).toFixed(2)),this.had_likes.forEach((e=>{t.account==e&&(t.iflike=!0)}))})))}))},setLike(t,e,s){var l={type:t,user_id:a("userInfo").user_id,user_account:e};1==t&&this.$api.third_openApi.near_user_like(l).then((t=>{0==t.code&&(this.list[s].iflike=!0)}))},async check_if_friend(t){var e=new Array;e.push(this.fromUser.user_id),e.push(t);200==(await this.$myRuquest({url:"/api/front/index/saveImUser",method:"POST",data:{users:e.toString()}})).code&&this.sendMessage(t)},sendMessage(t){let e={id:this.$util.getUuid(),is_group:0,fromUser:this.fromUser,type:"text",toContactId:t,content:this.send_content,sendTime:(new Date).getTime()};this.$api.msgApi.sendMessage(e).then((t=>{0==t.code?(this.show_talk=!1,this.notice_content="已打招呼，等待TA的回应！可在下方栏目-消息中查看",this.pop_notice=!0,this.notice_type=2):s({title:t.msg,icon:"none"})})).catch((t=>{}))}},created(){this.paddingB=this.inlineTools,this.getList();var t=a("userInfo");this.had_likes=t.islikes.split(","),this.fromUser=t}},[["render",function(t,e,a,s,U,$){const F=m("cu-custom"),T=y,A=o,I=m("Empty"),M=x,j=g;return l(),i(A,null,{default:n((()=>[_(F,{bgColor:"bg-gradual-pink",isBack:!0},{backText:n((()=>[])),content:n((()=>[d("喜欢我的TA")])),_:1}),0!==U.list.length?(l(),i(A,{key:0},{default:n((()=>[(l(!0),c(p,null,u(U.list,((t,e)=>r((l(),i(A,{class:"user_line",key:e},{default:n((()=>[_(A,{class:"user_l"},{default:n((()=>[_(T,{src:t.avatar,style:{width:"80px",height:"80px","border-radius":"50%"}},null,8,["src"]),_(A,{class:"item_like"},{default:n((()=>[t.ifonline?(l(),i(A,{key:0,class:"cuIcon-title",onClick:a=>$.setLike(2,t.account,e)},null,8,["onClick"])):k("",!0)])),_:2},1024)])),_:2},1024),_(A,{class:"user_r"},{default:n((()=>[_(A,{class:"item_name"},{default:n((()=>[_(A,{style:{display:"flex"}},{default:n((()=>[0==t.sex?(l(),i(A,{key:0,class:"sex_ico"},{default:n((()=>[_(T,{src:w,style:{width:"100%"},mode:"widthFix"})])),_:1})):k("",!0),1==t.sex?(l(),i(A,{key:1,class:"sex_ico"},{default:n((()=>[_(T,{src:b,style:{width:"100%"},mode:"widthFix"})])),_:1})):k("",!0),d(" "+h(t.realname),1)])),_:2},1024),_(A,{class:"col_96",style:{display:"flex",width:"150px","justify-content":"flex-end"}},{default:n((()=>[_(A,null,{default:n((()=>[d(h(t.isfar)+"km · ",1)])),_:2},1024),t.ifonline?(l(),i(A,{key:0},{default:n((()=>[d("在线")])),_:1})):k("",!0),t.ifonline?k("",!0):(l(),i(A,{key:1},{default:n((()=>[d(h(t.istime)+"小时",1)])),_:2},1024))])),_:2},1024)])),_:2},1024),_(A,{style:{margin:"5px 0","text-align":"right"}},{default:n((()=>[_(A,{class:"item_btn",onClick:e=>$.bet_talk(t)},{default:n((()=>[d("打招呼")])),_:2},1032,["onClick"])])),_:2},1024),null!==t.motto?(l(),i(A,{key:0,class:"motto"},{default:n((()=>[d("签名："+h(t.motto),1)])),_:2},1024)):k("",!0)])),_:2},1024)])),_:2},1024)),[[f,e<4]]))),128))])),_:1})):(l(),i(I,{key:1,noDatatext:"暂无记录",textcolor:"#999"})),r(_(A,null,{default:n((()=>[_(A,{class:"com_bg",onClick:e[0]||(e[0]=t=>U.show_talk=!1)}),_(A,{class:"talk_mian"},{default:n((()=>[_(A,{style:{width:"90%",margin:"auto"}},{default:n((()=>[_(A,{class:"talk_ico"},{default:n((()=>[_(T,{src:U.talk_data.avatar,style:{width:"100%","border-radius":"50%",height:"80px"},mode:"widthFix"},null,8,["src"])])),_:1}),_(A,{class:"talk_name"},{default:n((()=>[d(h(U.talk_data.realname),1)])),_:1}),_(A,{class:"talk_desc"},{default:n((()=>[0==U.talk_data.sex?(l(),i(A,{key:0,class:"talk_sex p_type1"},{default:n((()=>[_(A,{class:"sex_ico"},{default:n((()=>[_(T,{src:v,style:{width:"100%"},mode:"widthFix"})])),_:1}),_(A,{style:{"line-height":"25px"}},{default:n((()=>[d(h(U.talk_data.ages),1)])),_:1})])),_:1})):k("",!0),1==U.talk_data.sex?(l(),i(A,{key:1,class:"talk_sex p_type1"},{default:n((()=>[_(A,{class:"sex_ico"},{default:n((()=>[_(T,{src:C,style:{width:"100%"},mode:"widthFix"})])),_:1}),_(A,{style:{"line-height":"25px"}},{default:n((()=>[d(h(U.talk_data.ages),1)])),_:1})])),_:1})):k("",!0),2==U.talk_data.sex?(l(),i(A,{key:2,class:"talk_sex p_type3"},{default:n((()=>[_(A,{style:{"line-height":"25px"}},{default:n((()=>[d(h(U.talk_data.ages),1)])),_:1})])),_:1})):k("",!0),_(A,{class:"talk_sex p_type3"},{default:n((()=>[_(A,{style:{"line-height":"25px"}},{default:n((()=>[d("vip-"+h(U.talk_data.islevel),1)])),_:1})])),_:1})])),_:1}),_(A,{class:"talk_form"},{default:n((()=>[_(A,{style:{"padding-left":"10px"}},{default:n((()=>[_(M,{placeholder:"随意打个招呼吧",style:{height:"32px","font-size":"14px"},maxlength:"32",name:"input",modelValue:U.send_content,"onUpdate:modelValue":e[1]||(e[1]=t=>U.send_content=t)},null,8,["modelValue"])])),_:1}),_(A,null,{default:n((()=>[_(j,{class:"cu-btn bg-blue shadow",onClick:e[2]||(e[2]=t=>$.check_if_friend(U.talk_data.user_id))},{default:n((()=>[d("发送")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},512),[[f,U.show_talk]]),r(_(A,null,{default:n((()=>[_(A,{class:"com_bg"}),_(A,{class:"com_main"},{default:n((()=>[_(A,{class:"pop_mian"},{default:n((()=>[_(A,{class:"pop_title"},{default:n((()=>[d("提示")])),_:1}),_(A,{style:{padding:"10px 15px","line-height":"25px","flex-wrap":"wrap","text-align":"center"}},{default:n((()=>[d(h(U.notice_content),1)])),_:1}),_(A,{class:"pop_foot"},{default:n((()=>[1==U.notice_type?(l(),i(A,{key:0,class:"pop_ft_btn1",onClick:e[3]||(e[3]=t=>U.pop_notice=!1)},{default:n((()=>[d("关闭")])),_:1})):k("",!0),1==U.notice_type?(l(),i(A,{key:1,class:"pop_ft_btn2",onClick:e[4]||(e[4]=t=>$.pop_ok())},{default:n((()=>[d("去升级")])),_:1})):k("",!0),2==U.notice_type?(l(),i(A,{key:2,class:"pop_ft_btn2",onClick:e[5]||(e[5]=t=>U.pop_notice=!1)},{default:n((()=>[d("确定")])),_:1})):k("",!0)])),_:1})])),_:1})])),_:1})])),_:1},512),[[f,U.pop_notice]])])),_:1})}],["__scopeId","data-v-6c684774"]]);export{U as default};
