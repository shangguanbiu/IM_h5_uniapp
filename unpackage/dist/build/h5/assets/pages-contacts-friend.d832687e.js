import{_ as e,o as t,e as n,w as a,k as s,F as i,r,p as l,B as u,f as c,j as o,t as d,x as p,i as g,a2 as h,A as m,u as x,s as _,b as f,n as y,C as k,J as I,m as b,q as v,P as C}from"./index-bbbfa810.js";import{r as T}from"./uni-app.es.6a4837fd.js";import{_ as S}from"./uni-icons.10967054.js";const P=e({name:"UniSegmentedControl",emits:["clickItem"],props:{current:{type:Number,default:0},values:{type:Array,default:()=>[]},activeColor:{type:String,default:"#2979FF"},styleType:{type:String,default:"button"}},data:()=>({currentIndex:0}),watch:{current(e){e!==this.currentIndex&&(this.currentIndex=e)}},created(){this.currentIndex=this.current},methods:{_onClick(e){this.currentIndex!==e&&(this.currentIndex=e,this.$emit("clickItem",{currentIndex:e}))}}},[["render",function(e,h,m,x,_,f){const y=p,k=g;return t(),n(k,{class:l([["text"===m.styleType?"segmented-control--text":"segmented-control--button"],"segmented-control"]),style:u({borderColor:"text"===m.styleType?"":m.activeColor})},{default:a((()=>[(t(!0),s(i,null,r(m.values,((e,s)=>(t(),n(k,{class:l([["text"===m.styleType?"":"segmented-control__item--button",s===_.currentIndex&&"button"===m.styleType?"segmented-control__item--button--active":"",0===s&&"button"===m.styleType?"segmented-control__item--button--first":"",s===m.values.length-1&&"button"===m.styleType?"segmented-control__item--button--last":""],"segmented-control__item"]),key:s,style:u({backgroundColor:s===_.currentIndex&&"button"===m.styleType?m.activeColor:"",borderColor:s===_.currentIndex&&"text"===m.styleType||"button"===m.styleType?m.activeColor:"transparent"}),onClick:e=>f._onClick(s)},{default:a((()=>[c(k,null,{default:a((()=>[c(y,{style:u({color:s===_.currentIndex?"text"===m.styleType?m.activeColor:"#fff":"text"===m.styleType?"#000":m.activeColor}),class:l(["segmented-control__text","text"===m.styleType&&s===_.currentIndex?"segmented-control__item--text":""])},{default:a((()=>[o(d(e),1)])),_:2},1032,["style","class"])])),_:2},1024)])),_:2},1032,["class","style","onClick"])))),128))])),_:1},8,["class","style"])}],["__scopeId","data-v-ede2e670"]]),N={en:{"uni-pagination.prevText":"prev","uni-pagination.nextText":"next"},es:{"uni-pagination.prevText":"anterior","uni-pagination.nextText":"próxima"},fr:{"uni-pagination.prevText":"précédente","uni-pagination.nextText":"suivante"},"zh-Hans":{"uni-pagination.prevText":"上一页","uni-pagination.nextText":"下一页"},"zh-Hant":{"uni-pagination.prevText":"上一頁","uni-pagination.nextText":"下一頁"}},{t:z}=h(N);const w=e({name:"UniPagination",emits:["update:modelValue","input","change"],props:{value:{type:[Number,String],default:1},modelValue:{type:[Number,String],default:1},prevText:{type:String},nextText:{type:String},current:{type:[Number,String],default:1},total:{type:[Number,String],default:0},pageSize:{type:[Number,String],default:10},showIcon:{type:[Boolean,String],default:!1},pagerCount:{type:Number,default:7}},data:()=>({currentIndex:1,paperData:[]}),computed:{prevPageText(){return this.prevText||z("uni-pagination.prevText")},nextPageText(){return this.nextText||z("uni-pagination.nextText")},maxPage(){let e=1,t=Number(this.total),n=Number(this.pageSize);return t&&n&&(e=Math.ceil(t/n)),e},paper(){const e=this.currentIndex,t=this.pagerCount,n=this.total,a=this.pageSize;let s=[],i=[],r=Math.ceil(n/a);for(let u=0;u<r;u++)s.push(u+1);i.push(1);const l=s[s.length-(t+1)/2];return s.forEach(((n,a)=>{(t+1)/2>=e?n<t+1&&n>1&&i.push(n):e+2<=l?n>e-(t+1)/2&&n<e+(t+1)/2&&i.push(n):(n>e-(t+1)/2||r-t<n)&&n<s[s.length-1]&&i.push(n)})),r>t?((t+1)/2>=e?i[i.length-1]="...":e+2<=l?(i[1]="...",i[i.length-1]="..."):i[1]="...",i.push(s[s.length-1])):(t+1)/2>=e||e+2<=l||(i.shift(),i.push(s[s.length-1])),i}},watch:{current:{immediate:!0,handler(e,t){this.currentIndex=e<1?1:e}},value:{immediate:!0,handler(e){1===Number(this.current)&&(this.currentIndex=e<1?1:e)}}},methods:{selectPage(e,t){if(parseInt(e))this.currentIndex=e,this.change("current");else{let e=Math.ceil(this.total/this.pageSize);if(t<=1)return void(this.currentIndex-5>1?this.currentIndex-=5:this.currentIndex=1);if(t>=6)return void(this.currentIndex+5>e?this.currentIndex=e:this.currentIndex+=5)}},clickLeft(){1!==Number(this.currentIndex)&&(this.currentIndex-=1,this.change("prev"))},clickRight(){Number(this.currentIndex)>=this.maxPage||(this.currentIndex+=1,this.change("next"))},change(e){this.$emit("input",this.currentIndex),this.$emit("update:modelValue",this.currentIndex),this.$emit("change",{type:e,current:this.currentIndex})}}},[["render",function(e,u,h,x,_,f){const y=g,k=T(m("uni-icons"),S),I=p;return t(),n(y,{class:"uni-pagination"},{default:a((()=>[c(y,{class:"uni-pagination__total is-phone-hide"},{default:a((()=>[o("共 "+d(h.total)+" 条",1)])),_:1}),c(y,{class:l(["uni-pagination__btn",1===_.currentIndex?"uni-pagination--disabled":"uni-pagination--enabled"]),"hover-class":1===_.currentIndex?"":"uni-pagination--hover","hover-start-time":20,"hover-stay-time":70,onClick:f.clickLeft},{default:a((()=>[!0===h.showIcon||"true"===h.showIcon?(t(),n(k,{key:0,color:"#666",size:"16",type:"left"})):(t(),n(I,{key:1,class:"uni-pagination__child-btn"},{default:a((()=>[o(d(f.prevPageText),1)])),_:1}))])),_:1},8,["class","hover-class","onClick"]),c(y,{class:"uni-pagination__num uni-pagination__num-flex-none"},{default:a((()=>[c(y,{class:"uni-pagination__num-current"},{default:a((()=>[c(I,{class:"uni-pagination__num-current-text is-pc-hide",style:{color:"#409EFF"}},{default:a((()=>[o(d(_.currentIndex),1)])),_:1}),c(I,{class:"uni-pagination__num-current-text is-pc-hide"},{default:a((()=>[o("/"+d(f.maxPage||0),1)])),_:1}),(t(!0),s(i,null,r(f.paper,((e,s)=>(t(),n(y,{key:s,class:l([{"page--active":e===_.currentIndex},"uni-pagination__num-tag tag--active is-phone-hide"]),onClick:t=>f.selectPage(e,s)},{default:a((()=>[c(I,null,{default:a((()=>[o(d(e),1)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1}),c(y,{class:l(["uni-pagination__btn",_.currentIndex>=f.maxPage?"uni-pagination--disabled":"uni-pagination--enabled"]),"hover-class":_.currentIndex===f.maxPage?"":"uni-pagination--hover","hover-start-time":20,"hover-stay-time":70,onClick:f.clickRight},{default:a((()=>[!0===h.showIcon||"true"===h.showIcon?(t(),n(k,{key:0,color:"#666",size:"16",type:"right"})):(t(),n(I,{key:1,class:"uni-pagination__child-btn"},{default:a((()=>[o(d(f.nextPageText),1)])),_:1}))])),_:1},8,["class","hover-class","onClick"])])),_:1})}],["__scopeId","data-v-84bb2583"]]),L=x(_);f(L);const A=e({name:"group",data:()=>({items:["我收到的","我发起的"],current:0,list:[],total:0,params:{page:1,limit:10,is_mine:0}}),created(){},mounted(){this.getList()},methods:{getList(){this.$api.friendApi.applyList(this.params).then((e=>{0==e.code&&(this.list=e.data,this.total=e.count)}))},changePage(e){this.params.page=e.current,this.getList()},onClickItem(e){this.params.is_mine=e.currentIndex,this.current=e.currentIndex,this.params.page=1,this.getList()},sendMsg(e){y({url:"/pages/message/chat?id="+e})},openDetails(e){y({url:"/pages/contacts/detail?id="+e})},searchFriend(){y({url:"/pages/contacts/search"})},optApply(e){k({title:"提示",content:"你确定同意该好友的请求吗",cancelText:"拒绝",cancelColor:"#e54d42",confirmText:"接受",success:t=>{let n=0;t.confirm&&(n=1),this.$api.friendApi.acceptApply({friend_id:e.friend_id,status:n}).then((e=>{0==e.code&&(I({title:e.msg,icon:"none"}),L.sysUnread--,this.getList())}))}})}}},[["render",function(e,l,h,x,_,f){const y=p,k=g,I=v("cu-custom"),S=T(m("uni-segmented-control"),P),N=C,z=T(m("uni-pagination"),w),L=v("Empty");return t(),n(k,null,{default:a((()=>[c(I,{bgColor:"bg-gradual-blue",isBack:!0},{backText:a((()=>[])),content:a((()=>[o("新邀请")])),right:a((()=>[c(k,{class:"f-20 ml-10 mr-10",onClick:l[0]||(l[0]=e=>f.searchFriend())},{default:a((()=>[c(y,{class:"cuIcon-add"})])),_:1})])),_:1}),c(S,{current:_.current,values:_.items,onClickItem:f.onClickItem,styleType:"text"},null,8,["current","values","onClickItem"]),c(k,{class:"cu-list menu"},{default:a((()=>[_.params.is_mine?b("",!0):(t(!0),s(i,{key:0},r(_.list,((e,s)=>(t(),n(k,{class:"cu-item",key:s},{default:a((()=>[c(k,{class:"cu-avatar md radius mr-15",style:u([{backgroundImage:"url("+e.create_user_info.avatar+")"}])},null,8,["style"]),c(k,{class:"content padding-tb-sm",onClick:t=>f.openDetails(e.create_user_info.user_id)},{default:a((()=>[_.params.is_mine?b("",!0):(t(),n(k,{key:0,class:"text-grey"},{default:a((()=>[c(y,{class:"text-blue"},{default:a((()=>[o(d(e.create_user_info.realname),1)])),_:2},1024),o(" 申请添加您为好友 ")])),_:2},1024)),c(k,{class:"text-gray text-sm lh-15x"},{default:a((()=>[o(d(e.remark),1)])),_:2},1024)])),_:2},1032,["onClick"]),c(k,{class:"action ml-10"},{default:a((()=>[0==e.status?(t(),n(y,{key:0,class:"text-red"},{default:a((()=>[o("已拒绝")])),_:1})):b("",!0),1==e.status?(t(),n(y,{key:1,class:"text-blue",onClick:t=>f.sendMsg(e.create_user_info.user_id)},{default:a((()=>[o("发消息")])),_:2},1032,["onClick"])):b("",!0),2==e.status?(t(),n(N,{key:2,class:"cu-btn round sm bg-green",onClick:t=>f.optApply(e)},{default:a((()=>[o(" 操作 ")])),_:2},1032,["onClick"])):b("",!0)])),_:2},1024)])),_:2},1024)))),128)),_.params.is_mine?(t(!0),s(i,{key:1},r(_.list,((e,s)=>(t(),n(k,{class:"cu-item",key:s},{default:a((()=>[c(k,{class:"cu-avatar md radius mr-15",style:u([{backgroundImage:"url("+e.user_id_info.avatar+")"}])},null,8,["style"]),c(k,{class:"content",onClick:t=>f.openDetails(e.user_id_info.user_id)},{default:a((()=>[c(k,{class:"text-grey"},{default:a((()=>[o(" 请求添加"),c(y,{class:"text-blue"},{default:a((()=>[o(d(e.user_id_info.realname),1)])),_:2},1024),o(" 为好友 ")])),_:2},1024)])),_:2},1032,["onClick"]),c(k,{class:"action ml-10"},{default:a((()=>[0==e.status?(t(),n(y,{key:0,class:"text-red"},{default:a((()=>[o("已拒绝")])),_:1})):b("",!0),1==e.status?(t(),n(y,{key:1,class:"text-blue",onClick:t=>f.sendMsg(e.user_id_info.user_id)},{default:a((()=>[o("发消息")])),_:2},1032,["onClick"])):b("",!0),2==e.status?(t(),n(y,{key:2,class:"text-orange"},{default:a((()=>[o("待同意")])),_:1})):b("",!0)])),_:2},1024)])),_:2},1024)))),128)):b("",!0),_.list.length?(t(),n(k,{key:2,class:"m-10"},{default:a((()=>[c(z,{current:_.params.page,total:_.total,pageSize:_.params.limit,onChange:f.changePage},null,8,["current","total","pageSize","onChange"])])),_:1})):b("",!0),_.list.length?b("",!0):(t(),n(L,{key:3,noDatatext:"暂无群聊",textcolor:"#999"}))])),_:1})])),_:1})}]]);export{A as default};
